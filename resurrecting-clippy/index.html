<!DOCTYPE html>
<html data-n-head="" data-n-head-ssr>
  <head>
    <meta data-n-head="true" charset="utf-8"><meta data-n-head="true" content="width=device-width,initial-scale=1" name="viewport"><meta data-n-head="true" content="#ffffff" theme-color="theme-color"><meta data-n-head="true" content="Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat...
" name="description" data-hid="description"><meta data-n-head="true" content="clippy, desktop, app, NW.js, node-webkit, javascript" name="keywords" data-hid="keywords"><meta data-n-head="true" content="summary" name="twitter:card" data-hid="twitter:card"><meta data-n-head="true" content="Resurrecting Clippy" name="twitter:title" data-hid="twitter:title"><meta data-n-head="true" content="Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat...
" name="twitter:description" data-hid="twitter:description"><meta data-n-head="true" content="/images/blog-content/resurrecting-clippy/osx.png" name="twitter:image"><meta data-n-head="true" content="/resurrecting-clippy" name="twitter:url" data-hid="twitter:url"><meta data-n-head="true" content="article" name="og:type" data-hid="og:type"><meta data-n-head="true" content="Resurrecting Clippy" name="og:title" data-hid="og:title"><meta data-n-head="true" content="Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat...
" name="og:description" data-hid="og:description"><meta data-n-head="true" content="/images/blog-content/resurrecting-clippy/osx.png" name="og:image" data-hid="og:image"><meta data-n-head="true" content="/resurrecting-clippy" name="og:url" data-hid="og:url"><title data-n-head="true">Resurrecting Clippy</title><link href="/apple-touch-icon.png" rel="apple-touch-icon" data-n-head="true" sizes="76x76"><link href="/favicon-32x32.png" rel="icon" data-n-head="true" sizes="32x32" type="image/x-icon"><link href="/favicon-16x16.png" rel="icon" data-n-head="true" sizes="16x16" type="image/png"><link href="/safari-pinned-tab.svg" rel="mask-icon" data-n-head="true" color="#53687a"><link href="//unpkg.com/prismjs/themes/prism.css" rel="stylesheet" data-n-head="true"><link href="/_nuxt/manifest.7ea73c6a3544d21766bf.js" rel="preload" as="script"><link href="/_nuxt/vendor.ce05078a33ab89125ee8.js" rel="preload" as="script"><link href="/_nuxt/app.3b3400f1b40887e49e2f.js" rel="preload" as="script"><link href="/_nuxt/layouts/default.4f3d0ea5a04a4a70b7c1.js" rel="preload" as="script"><link href="/_nuxt/2.720975b4fca5c1ca409a.js" rel="preload" as="script"><link href="/_nuxt/pages/index.da23e945f3f345c0f9b2.js" rel="prefetch"><style data-vue-ssr-id="6dd13fd5:0">*{-webkit-box-sizing:border-box;box-sizing:border-box}body,html{margin:0;padding:0}ol,ul{list-style:none;padding-left:0;margin:0}a{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;text-decoration:none;color:inherit}body{font-family:Arial,sans-serif;line-height:1.55;letter-spacing:-.25px;-webkit-font-smoothing:antialiased}.wf-active body{font-family:Lato,Arial,sans-serif}body{background:#ececec;color:#333;padding-top:32px;padding-top:2rem}.wrapper{max-width:960px;max-width:60rem;margin:0 auto}.header{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:0 32px;padding:0 2rem;background:#ececec}@media (min-width:59rem){.header{-ms-flex-wrap:nowrap;flex-wrap:nowrap}}.site-title{margin:0;text-align:center;-webkit-transition:opacity .25s ease-in;transition:opacity .25s ease-in;min-width:100%;max-width:96px;max-width:6rem}@media (min-width:42rem){.site-title{min-width:0;-webkit-box-flex:1;-ms-flex:1;flex:1}}@media (min-width:59rem){.site-title{-webkit-box-flex:initial;-ms-flex:initial;flex:initial}}.site-title:hover{opacity:.9}.site-link{display:inline-block;background:url(/_nuxt/img/Logo.542e06c.png) 0 no-repeat;background-size:5.99rem;height:144px;height:9rem;width:96px;width:6rem;margin:0 auto;text-indent:-9999px}@media (-webkit-min-device-pixel-ratio:2),(min-device-pixel-ratio:2),(min-resolution:192dpi){.site-link{background-image:url(/_nuxt/img/Logo@2x.b121531.png)}}.site-happy-text-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;margin:0 auto;padding:0;width:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:20.8px;font-size:1.3rem}@media (min-width:42rem){.site-happy-text-wrapper{-webkit-box-flex:2;-ms-flex:2;flex:2;padding:0 0 0 2rem}}@media (min-width:59rem){.site-happy-text-wrapper{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:1.2rem}}@media (min-width:61rem){.site-happy-text-wrapper{font-size:1.3rem}}.site-happy-text{-webkit-box-flex:1;-ms-flex:1;flex:1;margin:0;text-align:center}@media (min-width:42rem){.site-happy-text{text-align:left}}.site-happy-text-headline{display:block}.site-happy-text-headline,.wf-active .site-happy-text-headline{font-size:30.4px;font-size:1.9rem;font-weight:700}@media (min-width:25rem){.site-happy-text-headline{font-size:2.3rem;line-height:1.7}.wf-active .site-happy-text-headline{line-height:1.5;font-size:2.5rem}}@media (min-width:59rem){.site-happy-text-headline{font-size:2.9rem}.wf-active .site-happy-text-headline{font-size:3.1rem}}@media (min-width:61rem){.site-happy-text-headline{font-size:2.92rem;line-height:1.7}.wf-active .site-happy-text-headline{line-height:1.5;font-size:3.2rem}}.site-happy-text-tagline{display:inline}@media (min-width:42rem){.site-happy-text-tagline{display:block}}.navigation-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;padding:32px 0 0;padding:2rem 0 0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}@media (min-width:59rem){.navigation-wrapper{max-width:23rem;padding:0 0 0 2rem}}.navigation{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;min-width:100%;width:100%}@media (min-width:59rem){.navigation{-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;min-width:0}}.navigation-item{-webkit-box-flex:1;-ms-flex:1 1 33%;flex:1 1 33%;min-width:33%;display:-webkit-box;display:-ms-flexbox;display:flex;position:relative;cursor:pointer;font-size:11.2px;font-size:.7rem;font-weight:700;text-shadow:0 1px 1px rgba(0,0,0,.2)}@media (min-width:25rem){.navigation-item{font-size:.75rem}}@media (min-width:45rem){.navigation-item{min-width:0;-webkit-box-flex:1;-ms-flex:1;flex:1}}@media (min-width:59rem){.navigation-item{-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;min-width:33%}}.writing-navigation-item{background:rgba(151,167,182,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.writing-navigation-item:hover{background:#889bab}.edit-navigation-item{background:hsla(210,7%,73%,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.edit-navigation-item:hover{background:#a8aeb4}.code-navigation-item{background:rgba(167,177,186,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.code-navigation-item:hover{background:#99a5af}.twitter-navigation-item{background:rgba(134,155,173,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.twitter-navigation-item:hover{background:#778ea3}.email-navigation-item{background:rgba(151,165,177,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.email-navigation-item:hover{background:#8898a6}.linkedin-navigation-item{background:hsla(208,9%,68%,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.linkedin-navigation-item:hover{background:#99a2aa}.navigation-link{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px;padding:1rem;text-decoration:none;color:#f5f5f5;font-size:12.8px;font-size:.8rem;-webkit-transition:color .25s;transition:color .25s}@media (min-width:25rem){.navigation-link{padding:1.5rem}}.navigation-link:after{content:"";position:absolute;top:100%;left:0;bottom:0;right:0;height:0;width:100%;background:#000;opacity:.02;cursor:pointer;-webkit-transition:all .2s ease-out;transition:all .2s ease-out}.navigation-link:hover{color:#fff}.navigation-link:hover:after{top:50%;height:50%}.navigation-item-text{-webkit-box-flex:1;-ms-flex:1;flex:1}.posts{padding:32px;padding:2rem}.post-wrapper{padding-bottom:32px;padding-bottom:2rem}.post-wrapper:last-child{padding-bottom:0}.post{padding:32px;padding:2rem;margin:32px;margin:2rem;background:#fff;max-width:960px;max-width:60rem}.posts .post{margin:0 auto}.post>:first-child{margin-top:0}.post-content{font-size:17.6px;font-size:1.1rem;line-height:1.55}.post-content>*{margin:24px 0 0;margin:1.5rem 0 0}.post-content :not(figure)>a{color:#3f729e;padding-bottom:.8px;padding-bottom:.05rem;background-image:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.2)),to(rgba(0,0,0,.2)));background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2));background-repeat:no-repeat;background-size:100% 1.5px;background-position:center bottom 10%;background-origin:padding-box;text-shadow:3px 0 #fff,2px 0 #fff,1px 0 #fff,-1px 0 #fff,-2px 0 #fff,-3px 0 #fff;-webkit-transition:color .25s;transition:color .25s}.post-content :not(figure)>a:hover{color:#223d55}.post-content blockquote{position:relative;font-size:20.8px;font-size:1.3rem;font-size:25.12px;font-size:1.57rem;font-style:italic;font-weight:100;padding-left:32px;padding-left:2rem;line-height:1.48;margin-top:32px;margin-top:2rem}.post-content blockquote:before{content:"\201C";position:absolute;top:-24px;top:-1.5rem;left:-8px;left:-.5rem;height:48px;height:3rem;width:25px;color:#f5f5f5;font-size:96px;font-size:6rem;font-style:normal;line-height:1}.post-content blockquote footer{margin-top:16px;margin-top:1rem;font-size:14.4px;font-size:.9rem;text-align:right}.post-content blockquote cite{display:inline-block;margin-left:8px;margin-left:.5rem}.post-content figure{text-align:center}.post-content figcaption{color:#666;font-size:14.4px;font-size:.9rem;font-style:italic}.post-content img{display:block;max-width:100%;height:auto;margin:0 auto;min-height:50px;min-width:150px;position:relative;color:#b6b6b6;font-size:14.4px;font-size:.9rem;text-align:center}.post-content img:before{content:"Image failed to load :/";display:block;font-size:15.2px;font-size:.95rem}.post-content code,.post-content pre{font-family:Consolas,Monaco,Andale Mono,monospace;text-shadow:0 1px #fff;white-space:pre;word-spacing:normal;word-break:normal;-webkit-font-feature-settings:none;font-feature-settings:none;-webkit-font-variant-ligatures:none;font-variant-ligatures:none;word-wrap:normal;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}.post-content :not(h3):not(h4):not(h5):not(h6)>code,.post-content pre{font-size:13.6px;font-size:.85rem}.post-content :not(pre)>code,.post-content pre{background:#f5f5f5}.post-content pre{padding:16px;padding:1rem;overflow:auto;color:#000}.post-content :not(pre)>code{display:inline-block;padding:0 4.36px;padding:0 .2725rem;white-space:normal}.post-content a code{background:transparent none repeat 0 0/auto auto padding-box border-box scroll;background:initial;font-size:15.68px;font-size:.98rem;padding:0;padding:initial}.post-content p:first-child{margin-top:0}.post-content h3{font-size:26px;font-size:1.625rem}.post-content h4{font-size:22.224px;font-size:1.389rem}.post-content h5{font-size:18.448px;font-size:1.153rem}.post-content h6{font-size:14.896px;font-size:.931rem}.post-content .post-header-anchor{position:absolute;left:-32px;left:-2rem;top:20px;width:32px;width:2rem;-webkit-transform:translateY(-50%);transform:translateY(-50%);background:0 0;text-align:center;line-height:1;text-shadow:none;-webkit-transition:opacity .25s ease-in-out;transition:opacity .25s ease-in-out}.post-content .post-header-anchor:focus{outline:0}.post-content .post-header-anchor:hover svg{opacity:1}.post-content .post-header-anchor:after{content:" copied";position:absolute;bottom:-14px;left:0;right:0;font-size:.6em;color:gray;opacity:0;visibility:none;-webkit-transition:opacity 2s;transition:opacity 2s}.post-content .post-header-anchor svg{opacity:.2}.post-content h4 .post-header-anchor{top:18px}.post-content h5 .post-header-anchor{top:16px}.post-content h6 .post-header-anchor{top:14px}.post-content .post-header-anchor--copied:after{opacity:1}.post-content p:last-of-type{margin-bottom:0}.post-content h3,.post-content h4,.post-content h5,.post-content h6{position:relative}.post-content h3+p,.post-content h4+p,.post-content h5+p,.post-content h6+p{margin-top:8px;margin-top:.5rem}.post-content p+h3,.post-content p+h4,.post-content p+h5,.post-content p+h6{margin-top:32px;margin-top:2rem}.post-content ol,.post-content ul{padding-left:1.25em;list-style:disc outside none;list-style:initial}.post-content li{margin-bottom:8px;margin-bottom:.5rem}.post-summary .post-content,.post-summary .post-content>*{display:inline}.post-content table{border-spacing:0;border-collapse:collapse}.post-content td,.post-content th{padding:0;padding:6px 13px;border:1px solid #dfe2e5}.post-content th{font-weight:600;text-align:left}.post-title-wrapper{margin:0}.post-title{line-height:1.4;font-size:22.4px;font-size:1.4rem;font-weight:700}.wf-active .post-title{font-size:24px;font-size:1.5rem;line-height:1.2}@media (min-width:30rem){.post-title{line-height:1.6;font-size:1.85rem}.wf-active .post-title{line-height:1.5;font-size:2rem}}.post-title-label{display:inline-block;position:relative;bottom:.3em;padding:.2em .4em;margin-left:.3em;font-size:.5em;background:#e3e3e3;color:#9e9e9e;border-radius:5%;font-weight:400;-webkit-transition:opacity .25s ease-in;transition:opacity .25s ease-in}.post-title:hover .post-title-label{opacity:.9}.post-title-label-parenthesis{display:none}.post-meta{font-size:14.4px;font-size:.9rem;margin:16px 0;margin:1rem 0;color:#a2a2a2}@media (-webkit-min-device-pixel-ratio:2),(min-device-pixel-ratio:2),(min-resolution:192dpi){.post-meta{color:#000;font-weight:300}}.post-blog-date{display:block;margin-top:8px;margin-top:.5rem}@media (min-width:30rem){.post-blog-date{display:inline;margin-top:0}.post-blog-date+.post-blog-title:before{display:inline-block;content:" \2014   ";margin:0 .25rem 0 .5rem}}.post-blog-link{font-weight:400;font-style:italic}.footer-link,.post-blog-link,.post-read-more-link,.post-title,.site-happy-text-headline-link,.site-happy-text-tagline-link{-webkit-transition:color .25s;transition:color .25s}.footer-link:hover,.post-blog-link:hover,.post-read-more-link:hover,.post-title:hover,.site-happy-text-headline-link:hover,.site-happy-text-tagline-link:hover{color:#869bad}.footer-link,.post-read-more-link,.post-title,.site-happy-text-tagline-link{color:#53687a}.post-read-more-link{display:inline-block;font-weight:700;margin:0}.post-comments{margin:32px;margin:2rem;padding:32px;padding:2rem;background:#fff}.footer{text-align:center;font-size:12.8px;font-size:.8rem;margin-bottom:32px;margin-bottom:2rem}.footer-text{margin:0}.footer-link{font-weight:700}.copyright{display:block;color:gray}@media (-webkit-min-device-pixel-ratio:2),(min-device-pixel-ratio:2),(min-resolution:192dpi){.copyright{font-weight:100}}.fix-bug-ignore{color:red}.posts{position:relative}.post-wrapper{-webkit-transition:padding .5s ease-in-out,-webkit-transform .3s ease-in-out;transition:padding .5s ease-in-out,-webkit-transform .3s ease-in-out;transition:padding .5s ease-in-out,transform .3s ease-in-out;transition:padding .5s ease-in-out,transform .3s ease-in-out,-webkit-transform .3s ease-in-out}.post{-webkit-transition:opacity .1s ease-in-out,-webkit-transform .1s ease-in-out;transition:opacity .1s ease-in-out,-webkit-transform .1s ease-in-out;transition:opacity .1s ease-in-out,transform .1s ease-in-out;transition:opacity .1s ease-in-out,transform .1s ease-in-out,-webkit-transform .1s ease-in-out}.posts--entering-post .post-wrapper:not(.post-wrapper--entering-from-posts) .post{opacity:.2;-webkit-transform:scale(.8);transform:scale(.8)}.posts--entering-post .post-wrapper--entering-from-posts{left:32px;left:2rem;right:32px;right:2rem}.post-skeleton{line-height:1.55;position:relative;opacity:0;max-height:0;overflow:hidden}.post-skeleton.post-skeleton--visible,.post-wrapper--entering-from-posts .post-skeleton{opacity:1;margin-top:32px;margin-top:2rem;max-height:none}.post-skeleton:after{content:" ";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;opacity:.2;-webkit-animation:1s skeleton infinite ease-in-out;animation:1s skeleton infinite ease-in-out}.post-skeleton-word{height:17.6px;height:1.1rem;background:#f7f7f7;width:46px;display:inline-block;margin:4px 6px 0 0}.post-skeleton-word:nth-child(2n){width:36px}.post-skeleton-word:nth-child(3n){width:76px}.post-skeleton+.post-skeleton .post-skeleton-word:nth-child(3n){width:71px}.post-skeleton-word:nth-child(5n){width:96px}.post-skeleton-word:nth-child(6n){width:63px}.post-skeleton-word:nth-child(7n){width:26px}@-webkit-keyframes skeleton{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}98%{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}99%{-webkit-transform:translate3d(100%,100%,0);transform:translate3d(100%,100%,0)}to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@keyframes skeleton{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}98%{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}99%{-webkit-transform:translate3d(100%,100%,0);transform:translate3d(100%,100%,0)}to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}</style><style data-vue-ssr-id="772bbed7:0">.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;-webkit-transition:width .2s,opacity .4s;transition:width .2s,opacity .4s;opacity:1;background-color:#efc14e;z-index:999999}</style>
    <script src="https://unpkg.com/scrollto-with-animation/dist/scrollto-with-animation.min.js"></script>
  </head>
  <body data-n-head="">
    <div id="__nuxt" data-server-rendered="true"><div class="nuxt-progress" style="width:0%;height:2px;background-color:#869bad;opacity:0"></div><div id="__layout"><div class="wrapper"><main class="content"><header class="header"><h1 class="site-title"><a href="/" class="site-link nuxt-link-active">Adam Lynch</a></h1><div class="site-happy-text-wrapper"><p class="site-happy-text"><span class="site-happy-text-headline">
                I'm <a href="/" class="site-happy-text-headline-link nuxt-link-active">Adam Lynch</a>.
            </span><span class="site-happy-text-tagline">
                I like to
                <a href="https://github.com/adam-lynch" class="site-happy-text-tagline-link">code</a>,
                <a href="/" class="site-happy-text-tagline-link nuxt-link-active">write</a>, and dabble in design.
            </span><span class="site-happy-text-tagline">
                I lead <a href="https://www.teamwork.com" class="site-happy-text-tagline-link">Teamwork.com</a>'s next product.
            </span></div><nav class="navigation-wrapper" role="navigation"><ul class="navigation"><li class="navigation-item writing-navigation-item"><a href="/" class="navigation-link"><span class="navigation-item-text">Writing</span></a><li class="navigation-item code-navigation-item"><a href="https://github.com/adam-lynch" class="navigation-link" rel="noopener"><span class="navigation-item-text">Code</span></a><li class="navigation-item edit-navigation-item"><a href="https://github.com/adam-lynch/adam-lynch.github.io" class="navigation-link" rel="noopener"><span class="navigation-item-text">Edit page</span></a><li class="navigation-item twitter-navigation-item"><a href="https://twitter.com/lynchy010/" class="navigation-link" rel="noopener"><span class="navigation-item-text">Twitter</span></a><li class="navigation-item email-navigation-item"><a href="mailto:contact@adamlynch.com" class="navigation-link" rel="noopener"><span class="navigation-item-text">Email</span></a><li class="navigation-item linkedin-navigation-item"><a href="https://www.linkedin.com/in/adamlynch010/" class="navigation-link" rel="noopener"><span class="navigation-item-text">LinkedIn</span></a></ul></nav></header><div><article class="post"><h2 class="post-title-wrapper"><a href="/resurrecting-clippy" class="post-title nuxt-link-exact-active nuxt-link-active">Resurrecting Clippy</a></h2><div class="post-meta"><time class="post-blog-date">March 8th, 2016</time><span class="post-blog-title">
            Originally posted on <a href="https://engineroom.teamwork.com/resurrecting-clippy-89843fcc9871" class="post-blog-link">Teamwork's Engine Room</a></span></div><div class="post-content">
<p><img src="/images/blog-content/resurrecting-clippy/osx.png" alt="Clippy on Mac OS X"></p>
<p>Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat Clippy? Yeah, you should be ashamed of yourself. You either loved or hated Clippy. <strong>Spoiler</strong>: after a lot of backlash, Microsoft secretly ran a smear campaign against its own little paperclip, including an anti-Clippy Website, a “Kill Clippy” game, and more. <em>“I see you’re trying to destroy me, would you like help with that?”</em> Clippy said. Eventually retiring Clippy to fanfare, Microsoft masterfully spun your anger into positive press. Shame on all of you.</p>
<p>I’m sure you’ve only recently stopped having guilt-ridden nightmares of a dancing paperclip, but I’ve good news. I’ve made a desktop application which not only brings Clippy back to Windows, but introduces Mac and Linux users to 90’s Siri too! Clippy.desktop is available for download at <a href="https://teamwork.github.io/clippy.desktop" rel="noopener">teamwork.github.io/clippy.desktop</a>.</p>
<p>Why? Because I can. There’s just something satisfying about seeing Clippy on Windows 10 or El Capitan. It wasn’t even hard; I feel like an imposter for simply throwing together a few open-source things, so I’m going to use this an opportunity to share how easy it is to make a desktop app with NW.js (and a few pitfalls). For extra measure, here’s an embarrassing photo of me as a child:</p>
<figure>
          <a href="/images/blog-content/resurrecting-clippy/embarrassing.jpg"><img src="/images/blog-content/resurrecting-clippy/embarrassing.jpg" alt=""></a>
          <figcaption><p>Look at those curls.</p>
</figcaption>
        </figure><h3><a href="#desktop-web-apps" class="post-header-anchor" id="desktop-web-apps" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Desktop (Web) apps</h3>
<p>Quickly moving on, <a href="http://nwjs.io/" rel="noopener">NW.js</a> was an obvious choice to make the app as we built the <a href="https://teamwork.com/chat" rel="noopener">Teamwork Chat</a> desktop apps with it. NW.js, along with the trendier <a href="http://electron.atom.io/" rel="noopener">Electron</a>, combines Chromium and Node.js to allow you to create a desktop application from a Web application. So the resultant executable is a standalone appplication just like Chrome which has access to all of the Node.js API as well. It’s great.</p>
<p>It doesn’t take long to get up and running either. You technically don’t need Node.js to develop an NW.js app, but I’ll assume you have it. First, grab the offical npm package; run <code>npm install -g nw</code> to make it available from anywhere on your machine. In a new directory named <code>clippy-desktop</code>, create a HTML file with whatever content you'd like. All we need now is an "app manifest"; run <code>npm init</code> and follow the steps the generate one. Enter the name of your HTML file when asked for the <code>main</code> file. Why <code>npm init</code>? The app manifest is basically the same as any npm module's <code>package.json</code> (where its dependencies are listed, and so on.). So, now you have a basic manifest looks something like this:</p>
<pre><code class="language-javascript"><span class="token punctuation">{</span>
  <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"clippy-desktop"</span><span class="token punctuation">,</span>
  <span class="token string">"version"</span><span class="token punctuation">:</span> <span class="token string">"0.0.1"</span><span class="token punctuation">,</span>
  <span class="token string">"main"</span><span class="token punctuation">:</span> <span class="token string">"index.html"</span><span class="token punctuation">,</span>
  <span class="token string">"dependencies"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now, run <code>nw clippy-desktop</code>.</p>
<figure>
          <a href="/images/blog-content/resurrecting-clippy/running.png"><img src="/images/blog-content/resurrecting-clippy/running.png" alt=""></a>
          
        </figure><p>Ta-da! Your app is running. If you don’t believe me, click the hamburger icon in the top right to access the DevTools and inspect the HTML.</p>
<h3><a href="#hello-clippy" class="post-header-anchor" id="hello-clippy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Hello, Clippy!</h3>
<p>Ok, ok, I’ll get to Clippy already. All credit to <a href="https://www.smore.com" rel="noopener">Smore</a> for creating a HTML, CSS, and JavaScript implementation of clippy <strong>in a weekend</strong>; <a href="https://www.smore.com/clippy-js" rel="noopener">ClippyJS</a> is impressive! Let’s use it in our app.</p>
<p>Smore recommend downloading the CSS and JavaScript files from the ClippyJS GitHub repository, but let’s use this as an oppurtunity to learn how using dependencies from npm works. npm is Node.js’ package manager we used earlier to install <code>nw</code>. ClippyJS isn't on npm (yet) but it is on GitHub and npm allows us to install it straight from GitHub by running <code>npm install --save smore-inc/clippy.js</code>. That would work but if the ClippyJS repository wasn't missing the manifest every Node.js module needs. So I've forked the ClippyJS repository and added the <code>package.json</code> (note that I've added jQuery under <code>dependencies</code>). Now, running <code>npm install --save adam-lynch/clippy.js#pkg</code> will install ClippyJS into <code>clippy-desktop/node_modules</code>. To include ClippyJS we have to reference the CSS and JavaScript files just like we would in any Web app, adding <code>&lt;link href="node_modules/clippy.js/build/clippy.css" rel="stylesheet"/></code> and <code>&lt;script src="node_modules/clippy.js/build/clippy.min.js">&lt;/script></code> to the correct files.</p>
<p>Note: Just in case you’ve noticed that Clippy.desktop’s <code>index.html</code> doesn't reference each file like I've just said; I've combined the dependencies into <code>third-party.js</code> just to make it cleaner, similarly to what's described in <a href="https://adamlynch.com/hassle-free-third-party-dependencies/" rel="noopener">Hassle-free third-party dependencies</a>.</p>
<p>The ClippyJS site says we’ll need to programatically show Clippy ourselves, so let’s create a <code>script.js</code> with the following contents:</p>
<pre><code class="language-javascript">clippy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'Clippy'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>agent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    agent<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>To resurrect Clippy:</p>
<ul>
<li>Make sure you’ve added a <code>&lt;script></code> linking to your <code>script.js</code>.</li>
<li>Kill the running app.</li>
<li>Run <code>nw clippy-desktop</code> again.</li>
</ul>
<h3><a href="#what-now" class="post-header-anchor" id="what-now" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>What now?!</h3>
<p>Huh. It’s not working. Open the DevTools and check for any errors. Hmm…</p>
<pre><code class="language-javascript">Failed to load resource<span class="token punctuation">:</span> net<span class="token punctuation">:</span><span class="token punctuation">:</span>ERR\_FILE\_NOT\_FOUND
</code></pre>
<p>Ah, the problem is <a href="https://github.com/smore-inc/clippy.js/blob/master/src/load.js#L1" rel="noopener">this line</a> in the ClippyJS source:</p>
<pre><code class="language-javascript">clippy<span class="token punctuation">.</span>BASE_PATH <span class="token operator">=</span> <span class="token string">'//s3.amazonaws.com/clippy.js/Agents/'</span><span class="token punctuation">;</span>
</code></pre>
<p>The main ClippyJS file seems to be requesting more scripts from Amazon S3. See that the URL begins with <code>//</code> That's a <a href="http://www.paulirish.com/2010/the-protocol-relative-url/" rel="noopener">protocol-relative URL</a>, i.e. if the current site was accessed over HTTPS, HTTPS will be used as the protocol when requesting this URL, or HTTP if the site was accessed over HTTP. But the protocol in our case is neither HTTP nor HTTPs; our <code>index.html</code> is a local file and accessed as such. In our case, this URL would be expanded tofile:///s3.amazonaws.com.... So if you want your Web app to work on the desktop, avoid protocol-relative URLs. To fix this line, you would need to have something like the following:</p>
<pre><code class="language-javascript">clippy<span class="token punctuation">.</span>BASE_PATH <span class="token operator">=</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol <span class="token operator">===</span> <span class="token string">'file:'</span> <span class="token operator">?</span> <span class="token string">'https:'</span> <span class="token punctuation">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'//s3.amazonaws.com/clippy.js/Agents/'</span><span class="token punctuation">;</span>
</code></pre>
<p>So, after I updated this in my fork of ClippyJS, I re-ran the <code>npm install</code> command and re-launched the app.</p>
<h3><a href="#think-outside-the-box" class="post-header-anchor" id="think-outside-the-box" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Think outside the box</h3>
<p>It could be prettier though right? Let’s start by making the window a bit smaller, removing the frame, and removing the toolbar (the search bar, etc.). Add the following to the app manifest:</p>
<pre><code class="language-javascript"><span class="token string">"window"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">"frame"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token string">"toolbar"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token string">"width"</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  <span class="token string">"height"</span><span class="token punctuation">:</span> <span class="token number">300</span>
<span class="token punctuation">}</span>
</code></pre>
<p>That’s it.</p>
<p>Although if you’re on Mac OS X you’ll notice there’s a <a href="https://github.com/nwjs/nw.js/issues/3645" rel="noopener">weird bug</a> where the window title is still shown. To workaround this, we can give the window a dummy title. We only want to do this if the app is running on Mac though, so let’s use Node.js’ core <code>os</code> module to detect the platform. Adding this to our <code>script.js</code> should be enough to solve the problem:</p>
<pre><code class="language-javascript"><span class="token keyword">var</span> isMac <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">platform</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'darwin'</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>isMac<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'\u3000'</span><span class="token punctuation">;</span> <span class="token comment">// to get around https://github.com/nwjs/nw.js/issues/3645</span>
<span class="token punctuation">}</span>
</code></pre>
<figure>
          <a href="/images/blog-content/resurrecting-clippy/frameless.png"><img src="/images/blog-content/resurrecting-clippy/frameless.png" alt=""></a>
          <figcaption><p>The frameless app.</p>
</figcaption>
        </figure><p>Ok, it’s better but let’s ditch that background.</p>
<p>Transparency</p>
<p>Let’s go back to our manifest and add a <code>transparent</code> property inside <code>window</code>;</p>
<pre><code class="language-javascript"><span class="token string">"window"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">"frame"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token string">"toolbar"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token string">"width"</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  <span class="token string">"height"</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  <span class="token string">"transparent"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This gives the app the <em>ability</em> to be transparent, but doesn’t make it transparent. This can be toggled programmatically as well. Note: depending on the platform, you may need to jump through some extra hoops, see <a href="https://www.packtpub.com/books/content/transparency-and-nwjs" rel="noopener">Transparency and NW.js</a>. All that’s left is to make sure your elements are not</p>
<p>All that’s left is to make sure your elements are not opague; for example:</p>
<pre><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a href="#dragging" class="post-header-anchor" id="dragging" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Dragging</h3>
<p>We no longer have a window title bar so we can’t drag it around anymore. CSS to the rescue, again!</p>
<pre><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-app-region</span><span class="token punctuation">:</span> drag<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now you can drag the app by clicking and holding anywhere on the <code>body</code>.</p>
<p>Unfortunately, double-clicking a draggable area triggers the window to maximize on some platforms. So what we’ll do is tell the user that double clicking will close clippy.desktop, thanks to clippy.js’ <code>agent.speak</code> method which shows a speech bubble. Just to annoy the user even more, we won’t. Instead, Clippy will disappear and reappear again after a couple of seconds. This is done in the <code>clippy.load</code> callback:</p>
<pre><code class="language-javascript"><span class="token comment">// show clippy</span>
clippy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'Clippy'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>agent<span class="token punctuation">)</span><span class="token punctuation">{</span>
    agent<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> intiialSpeechTimeoutId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        agent<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token string">"Need some help closing me? Try double-clicking..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> windowX <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> windowY <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        windowX <span class="token operator">=</span> win<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        windowY <span class="token operator">=</span> win<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ...</span>

    <span class="token comment">// Since double-clicking draggable areas triggers maximizing on some platforms, when tell the user double-clicking</span>
    <span class="token comment">// closes clippy but actually we'll hide the window, unmaximize, resize back to the normal size and show again</span>
    <span class="token comment">// with a speech bubble</span>
    win<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'maximize'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        win<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>intiialSpeechTimeoutId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>intiialSpeechTimeoutId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            intiialSpeechTimeoutId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            win<span class="token punctuation">.</span><span class="token function">unmaximize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            win<span class="token punctuation">.</span><span class="token function">resizeTo</span><span class="token punctuation">(</span>gui<span class="token punctuation">.</span>App<span class="token punctuation">.</span>manifest<span class="token punctuation">.</span>window<span class="token punctuation">.</span>width<span class="token punctuation">,</span> gui<span class="token punctuation">.</span>App<span class="token punctuation">.</span>manifest<span class="token punctuation">.</span>window<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
            win<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>windowX<span class="token punctuation">,</span> windowY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            win<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                agent<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token string">"Need some help?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3><a href="#events" class="post-header-anchor" id="events" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Events</h3>
<p>Speaking of clicking, we also block clippy.js from adding any event handlers itself with jQuery;</p>
<pre><code class="language-javascript">$<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">on</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>This is before <code>clippy.load</code> is called. We want to handle clicks and everything else ourselves.</p>
<p>Animating Clippy on click should be easy right? You might not be aware but if a window is not focused on Mac OS X, the first click focuses the window and the second click actually clicks the element. This is expected behavior on Mac OS X. Note: This is why you never create HTML window controls and bars when using NW.js or Electron, as it would take two clicks to minimize a window for example.</p>
<p>This is why I use the window’s <code>focus</code> event instead. Whenever the window is focused, I trigger an animation and blur the window.</p>
<pre><code class="language-javascript"><span class="token comment">// to be safe: use focus as a click handler kinda, to trigger animations. Blur when done so every click triggers</span>
<span class="token comment">// an animation</span>
win<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>‘focus’<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  agent<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  win<span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Note: Cross-platform support for blurring isn’t 100% solid so it’s best to just trigger an animation every once in awhile anyway as well.</p>
<h3><a href="#i-see-you-have-no-internet-connection" class="post-header-anchor" id="i-see-you-have-no-internet-connection" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>I see you have no internet connection</h3>
<p>If you’re offline, clippy.desktop doesn’t show anything. Why? Let’s take a look at the line in clippy.js again:</p>
<pre><code class="language-javascript">clippy<span class="token punctuation">.</span>BASE_PATH <span class="token operator">=</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol <span class="token operator">===</span> ‘file<span class="token punctuation">:</span>’ <span class="token operator">?</span> ‘https<span class="token punctuation">:</span>’ <span class="token punctuation">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span> <span class="token operator">+</span> ‘<span class="token comment">//s3.amazonaws.com/clippy.js/Agents/’;</span>
</code></pre>
<p>Why is it doing anything at all with URLs? I’m not sure why it wasn’t bundled into one script but ClippyJS requests additional (remote) scripts from within the base clippy.js script. This doesn’t make sense for a desktop app.</p>
<p><img src="/images/blog-content/resurrecting-clippy/mental.png" alt=""></p>
<h3><a href="#mental-mode" class="post-header-anchor" id="mental-mode" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Mental mode</h3>
<p>This is where you come in. This implementation is just a start. Feel free to <a href="https://github.com/teamwork/clippy.desktop" rel="noopener">improve it in a pull-request</a>. After all, it’s just HTML, CSS, and Javascript. I’m not suggesting that you add a mode which makes Clippy disappear on <code>mouseover</code>, reappear elsewhere, jump around the place, driving the user insane. Definitely not.</p>
<h3><a href="#tldr" class="post-header-anchor" id="tldr" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>TL;DR</h3>
<ul>
<li>It’s easy to make a desktop (Web) app with NW.js.</li>
<li>You can access all of Node.js, its module system and npm.</li>
<li>Don’t use protocol-less URIs.</li>
<li>Be aware of how Mac OS X treats clicks on unfocused windows.</li>
<li>Make sure your app works offline.</li>
<li>Have fun.</li>
</ul>
</div></article><aside class="post-comments"><div id="disqus_thread"></div><div class="post-skeleton post-skeleton--visible" aria-hidden="true"><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span></div></aside></div><footer class="footer"><p class="footer-text"><a href="https://github.com/adam-lynch/adam-lynch.github.io" class="footer-link">This site is open source</a><span class="copyright">© 2018 Adam Lynch</span></footer></main></div></div></div><script type="text/javascript">window.__NUXT__={layout:"default",data:[{article:{id:"resurrecting-clippy",slug:"resurrecting-clippy",highlightedLanguages:["javascript","css"],source:'---\ndate: 2016-03-08\nsummary: Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat...\noriginal:\n  blogLink: https://engineroom.teamwork.com\n  blogName: Teamwork\'s Engine Room\n  url: https://engineroom.teamwork.com/resurrecting-clippy-89843fcc9871\ntags:\n  - clippy\n  - desktop\n  - app\n  - nw.js\n  - node-webkit\n  - javascript\n---\n\n## Resurrecting Clippy\n\n![Clippy on Mac OS X](/images/blog-content/resurrecting-clippy/osx.png)\n\nRemember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat Clippy? Yeah, you should be ashamed of yourself. You either loved or hated Clippy. **Spoiler**: after a lot of backlash, Microsoft secretly ran a smear campaign against its own little paperclip, including an anti-Clippy Website, a “Kill Clippy” game, and more. _“I see you’re trying to destroy me, would you like help with that?”_ Clippy said. Eventually retiring Clippy to fanfare, Microsoft masterfully spun your anger into positive press. Shame on all of you.\n\nI’m sure you’ve only recently stopped having guilt-ridden nightmares of a dancing paperclip, but I’ve good news. I’ve made a desktop application which not only brings Clippy back to Windows, but introduces Mac and Linux users to 90’s Siri too! Clippy.desktop is available for download at [teamwork.github.io/clippy.desktop](https://teamwork.github.io/clippy.desktop).\n\nWhy? Because I can. There’s just something satisfying about seeing Clippy on Windows 10 or El Capitan. It wasn’t even hard; I feel like an imposter for simply throwing together a few open-source things, so I’m going to use this an opportunity to share how easy it is to make a desktop app with NW.js (and a few pitfalls). For extra measure, here’s an embarrassing photo of me as a child:\n\n:::figure resurrecting-clippy/embarrassing.jpg Look at those curls.\n:::\n\n### Desktop (Web) apps\n\nQuickly moving on, [NW.js](http://nwjs.io/) was an obvious choice to make the app as we built the [Teamwork Chat](https://teamwork.com/chat) desktop apps with it. NW.js, along with the trendier [Electron](http://electron.atom.io/), combines Chromium and Node.js to allow you to create a desktop application from a Web application. So the resultant executable is a standalone appplication just like Chrome which has access to all of the Node.js API as well. It’s great.\n\nIt doesn’t take long to get up and running either. You technically don’t need Node.js to develop an NW.js app, but I’ll assume you have it. First, grab the offical npm package; run `npm install -g nw` to make it available from anywhere on your machine. In a new directory named `clippy-desktop`, create a HTML file with whatever content you\'d like. All we need now is an "app manifest"; run `npm init` and follow the steps the generate one. Enter the name of your HTML file when asked for the `main` file. Why `npm init`? The app manifest is basically the same as any npm module\'s `package.json` (where its dependencies are listed, and so on.). So, now you have a basic manifest looks something like this:\n\n```javascript\n{\n  "name": "clippy-desktop",\n  "version": "0.0.1",\n  "main": "index.html",\n  "dependencies": {}\n}\n```\n\nNow, run `nw clippy-desktop`.\n\n:::figure resurrecting-clippy/running.png\n:::\n\nTa-da! Your app is running. If you don’t believe me, click the hamburger icon in the top right to access the DevTools and inspect the HTML.\n\n### Hello, Clippy!\n\nOk, ok, I’ll get to Clippy already. All credit to [Smore](https://www.smore.com) for creating a HTML, CSS, and JavaScript implementation of clippy **in a weekend**; [ClippyJS](https://www.smore.com/clippy-js) is impressive! Let’s use it in our app.\n\nSmore recommend downloading the CSS and JavaScript files from the ClippyJS GitHub repository, but let’s use this as an oppurtunity to learn how using dependencies from npm works. npm is Node.js’ package manager we used earlier to install `nw`. ClippyJS isn\'t on npm (yet) but it is on GitHub and npm allows us to install it straight from GitHub by running `npm install --save smore-inc/clippy.js`. That would work but if the ClippyJS repository wasn\'t missing the manifest every Node.js module needs. So I\'ve forked the ClippyJS repository and added the `package.json` (note that I\'ve added jQuery under `dependencies`). Now, running `npm install --save adam-lynch/clippy.js#pkg` will install ClippyJS into `clippy-desktop/node_modules`. To include ClippyJS we have to reference the CSS and JavaScript files just like we would in any Web app, adding `<link href="node_modules/clippy.js/build/clippy.css" rel="stylesheet"/>` and `<script src="node_modules/clippy.js/build/clippy.min.js"><\/script>` to the correct files.\n\nNote: Just in case you’ve noticed that Clippy.desktop’s `index.html` doesn\'t reference each file like I\'ve just said; I\'ve combined the dependencies into `third-party.js` just to make it cleaner, similarly to what\'s described in [Hassle-free third-party dependencies](https://adamlynch.com/hassle-free-third-party-dependencies/).\n\nThe ClippyJS site says we’ll need to programatically show Clippy ourselves, so let’s create a `script.js` with the following contents:\n\n```javascript\nclippy.load(\'Clippy\', function(agent) {\n    agent.show();\n});\n```\n\nTo resurrect Clippy:\n\n- Make sure you’ve added a `<script>` linking to your `script.js`.\n- Kill the running app.\n- Run `nw clippy-desktop` again.\n\n### What now?!\n\nHuh. It’s not working. Open the DevTools and check for any errors. Hmm…\n\n```javascript\nFailed to load resource: net::ERR\\_FILE\\_NOT\\_FOUND\n```\n\nAh, the problem is [this line](https://github.com/smore-inc/clippy.js/blob/master/src/load.js#L1) in the ClippyJS source:\n\n```javascript\nclippy.BASE_PATH = \'//s3.amazonaws.com/clippy.js/Agents/\';\n```\n\nThe main ClippyJS file seems to be requesting more scripts from Amazon S3\\. See that the URL begins with `//` That\'s a [protocol-relative URL](http://www.paulirish.com/2010/the-protocol-relative-url/), i.e. if the current site was accessed over HTTPS, HTTPS will be used as the protocol when requesting this URL, or HTTP if the site was accessed over HTTP. But the protocol in our case is neither HTTP nor HTTPs; our `index.html` is a local file and accessed as such. In our case, this URL would be expanded tofile:///s3.amazonaws.com.... So if you want your Web app to work on the desktop, avoid protocol-relative URLs. To fix this line, you would need to have something like the following:\n\n```javascript\nclippy.BASE_PATH = (window.location.protocol === \'file:\' ? \'https:\' : window.location.protocol) + \'//s3.amazonaws.com/clippy.js/Agents/\';\n```\n\nSo, after I updated this in my fork of ClippyJS, I re-ran the `npm install` command and re-launched the app.\n\n### Think outside the box\n\nIt could be prettier though right? Let’s start by making the window a bit smaller, removing the frame, and removing the toolbar (the search bar, etc.). Add the following to the app manifest:\n\n```javascript\n"window": {\n  "frame": false,\n  "toolbar": false,\n  "width": 300,\n  "height": 300\n}\n```\n\nThat’s it.\n\nAlthough if you’re on Mac OS X you’ll notice there’s a [weird bug](https://github.com/nwjs/nw.js/issues/3645) where the window title is still shown. To workaround this, we can give the window a dummy title. We only want to do this if the app is running on Mac though, so let’s use Node.js’ core `os` module to detect the platform. Adding this to our `script.js` should be enough to solve the problem:\n\n```javascript\nvar isMac = require(\'os\').platform() === \'darwin\';\n\nif (isMac) {\n    document.title = \'\\u3000\'; // to get around https://github.com/nwjs/nw.js/issues/3645\n}\n```\n\n:::figure resurrecting-clippy/frameless.png The frameless app.\n:::\n\nOk, it’s better but let’s ditch that background.\n\nTransparency\n\nLet’s go back to our manifest and add a `transparent` property inside `window`;\n\n```javascript\n"window": {\n  "frame": false,\n  "toolbar": false,\n  "width": 300,\n  "height": 300,\n  "transparent": true\n}\n```\n\nThis gives the app the _ability_ to be transparent, but doesn’t make it transparent. This can be toggled programmatically as well. Note: depending on the platform, you may need to jump through some extra hoops, see [Transparency and NW.js](https://www.packtpub.com/books/content/transparency-and-nwjs). All that’s left is to make sure your elements are not\n\nAll that’s left is to make sure your elements are not opague; for example:\n\n```css\nbody {\n  background: transparent;\n}\n```\n\n### Dragging\n\nWe no longer have a window title bar so we can’t drag it around anymore. CSS to the rescue, again!\n\n```css\nbody {\n  -webkit-app-region: drag;\n}\n```\n\nNow you can drag the app by clicking and holding anywhere on the `body`.\n\nUnfortunately, double-clicking a draggable area triggers the window to maximize on some platforms. So what we’ll do is tell the user that double clicking will close clippy.desktop, thanks to clippy.js’ `agent.speak` method which shows a speech bubble. Just to annoy the user even more, we won’t. Instead, Clippy will disappear and reappear again after a couple of seconds. This is done in the `clippy.load` callback:\n\n```javascript\n// show clippy\nclippy.load(\'Clippy\', function(agent){\n    agent.show();\n    var intiialSpeechTimeoutId = setTimeout(function() {\n        agent.speak("Need some help closing me? Try double-clicking...");\n    }, 20000);\n\n    var windowX = null;\n    var windowY = null;\n    setTimeout(function(){\n        windowX = win.x;\n        windowY = win.y;\n    }, 250);\n\n    // ...\n\n    // Since double-clicking draggable areas triggers maximizing on some platforms, when tell the user double-clicking\n    // closes clippy but actually we\'ll hide the window, unmaximize, resize back to the normal size and show again\n    // with a speech bubble\n    win.on(\'maximize\', function(){\n        document.body.classList.add(\'hidden\');\n        win.hide();\n        if(intiialSpeechTimeoutId) {\n            clearTimeout(intiialSpeechTimeoutId);\n            intiialSpeechTimeoutId = null;\n        }\n\n        setTimeout(function(){\n            win.unmaximize();\n            win.resizeTo(gui.App.manifest.window.width, gui.App.manifest.window.height);\n            win.moveTo(windowX, windowY);\n        }, 250);\n\n        setTimeout(function(){\n            win.show();\n            document.body.classList.remove(\'hidden\');\n            setTimeout(function(){\n                agent.speak("Need some help?");\n            }, 500);\n        }, 2000);\n    });\n});\n```\n\n### Events\n\nSpeaking of clicking, we also block clippy.js from adding any event handlers itself with jQuery;\n\n```javascript\n$.fn.on = function(){};\n```\n\nThis is before `clippy.load` is called. We want to handle clicks and everything else ourselves.\n\nAnimating Clippy on click should be easy right? You might not be aware but if a window is not focused on Mac OS X, the first click focuses the window and the second click actually clicks the element. This is expected behavior on Mac OS X. Note: This is why you never create HTML window controls and bars when using NW.js or Electron, as it would take two clicks to minimize a window for example.\n\nThis is why I use the window’s `focus` event instead. Whenever the window is focused, I trigger an animation and blur the window.\n\n```javascript\n// to be safe: use focus as a click handler kinda, to trigger animations. Blur when done so every click triggers\n// an animation\nwin.on(‘focus’, function() {\n  agent.animate();\n  win.blur();\n});\n```\n\nNote: Cross-platform support for blurring isn’t 100% solid so it’s best to just trigger an animation every once in awhile anyway as well.\n\n### I see you have no internet connection\n\nIf you’re offline, clippy.desktop doesn’t show anything. Why? Let’s take a look at the line in clippy.js again:\n\n```javascript\nclippy.BASE_PATH = (window.location.protocol === ‘file:’ ? ‘https:’ : window.location.protocol) + ‘//s3.amazonaws.com/clippy.js/Agents/’;\n```\n\nWhy is it doing anything at all with URLs? I’m not sure why it wasn’t bundled into one script but ClippyJS requests additional (remote) scripts from within the base clippy.js script. This doesn’t make sense for a desktop app.\n\n![](/images/blog-content/resurrecting-clippy/mental.png)\n\n### Mental mode\n\nThis is where you come in. This implementation is just a start. Feel free to [improve it in a pull-request](https://github.com/teamwork/clippy.desktop). After all, it’s just HTML, CSS, and Javascript. I’m not suggesting that you add a mode which makes Clippy disappear on `mouseover`, reappear elsewhere, jump around the place, driving the user insane. Definitely not.\n\n### TL;DR\n\n- It’s easy to make a desktop (Web) app with NW.js.\n- You can access all of Node.js, its module system and npm.\n- Don’t use protocol-less URIs.\n- Be aware of how Mac OS X treats clicks on unfocused windows.\n- Make sure your app works offline.\n- Have fun.\n',unfilteredRenderedBody:'<h2><a id="resurrecting-clippy" class="post-header-anchor" href="#resurrecting-clippy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Resurrecting Clippy</h2>\n<p><img src="/images/blog-content/resurrecting-clippy/osx.png" alt="Clippy on Mac OS X"></p>\n<p>Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat Clippy? Yeah, you should be ashamed of yourself. You either loved or hated Clippy. <strong>Spoiler</strong>: after a lot of backlash, Microsoft secretly ran a smear campaign against its own little paperclip, including an anti-Clippy Website, a “Kill Clippy” game, and more. <em>“I see you’re trying to destroy me, would you like help with that?”</em> Clippy said. Eventually retiring Clippy to fanfare, Microsoft masterfully spun your anger into positive press. Shame on all of you.</p>\n<p>I’m sure you’ve only recently stopped having guilt-ridden nightmares of a dancing paperclip, but I’ve good news. I’ve made a desktop application which not only brings Clippy back to Windows, but introduces Mac and Linux users to 90’s Siri too! Clippy.desktop is available for download at <a href="https://teamwork.github.io/clippy.desktop" rel="noopener">teamwork.github.io/clippy.desktop</a>.</p>\n<p>Why? Because I can. There’s just something satisfying about seeing Clippy on Windows 10 or El Capitan. It wasn’t even hard; I feel like an imposter for simply throwing together a few open-source things, so I’m going to use this an opportunity to share how easy it is to make a desktop app with NW.js (and a few pitfalls). For extra measure, here’s an embarrassing photo of me as a child:</p>\n<figure>\n          <a href="/images/blog-content/resurrecting-clippy/embarrassing.jpg"><img src="/images/blog-content/resurrecting-clippy/embarrassing.jpg" alt=""/></a>\n          <figcaption><p>Look at those curls.</p>\n</figcaption>\n        </figure><h3><a id="desktop-web-apps" class="post-header-anchor" href="#desktop-web-apps" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Desktop (Web) apps</h3>\n<p>Quickly moving on, <a href="http://nwjs.io/" rel="noopener">NW.js</a> was an obvious choice to make the app as we built the <a href="https://teamwork.com/chat" rel="noopener">Teamwork Chat</a> desktop apps with it. NW.js, along with the trendier <a href="http://electron.atom.io/" rel="noopener">Electron</a>, combines Chromium and Node.js to allow you to create a desktop application from a Web application. So the resultant executable is a standalone appplication just like Chrome which has access to all of the Node.js API as well. It’s great.</p>\n<p>It doesn’t take long to get up and running either. You technically don’t need Node.js to develop an NW.js app, but I’ll assume you have it. First, grab the offical npm package; run <code>npm install -g nw</code> to make it available from anywhere on your machine. In a new directory named <code>clippy-desktop</code>, create a HTML file with whatever content you\'d like. All we need now is an &quot;app manifest&quot;; run <code>npm init</code> and follow the steps the generate one. Enter the name of your HTML file when asked for the <code>main</code> file. Why <code>npm init</code>? The app manifest is basically the same as any npm module\'s <code>package.json</code> (where its dependencies are listed, and so on.). So, now you have a basic manifest looks something like this:</p>\n<pre><code class="language-javascript"><span class="token punctuation">{</span>\n  <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"clippy-desktop"</span><span class="token punctuation">,</span>\n  <span class="token string">"version"</span><span class="token punctuation">:</span> <span class="token string">"0.0.1"</span><span class="token punctuation">,</span>\n  <span class="token string">"main"</span><span class="token punctuation">:</span> <span class="token string">"index.html"</span><span class="token punctuation">,</span>\n  <span class="token string">"dependencies"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<p>Now, run <code>nw clippy-desktop</code>.</p>\n<figure>\n          <a href="/images/blog-content/resurrecting-clippy/running.png"><img src="/images/blog-content/resurrecting-clippy/running.png" alt=""/></a>\n          \n        </figure><p>Ta-da! Your app is running. If you don’t believe me, click the hamburger icon in the top right to access the DevTools and inspect the HTML.</p>\n<h3><a id="hello-clippy" class="post-header-anchor" href="#hello-clippy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Hello, Clippy!</h3>\n<p>Ok, ok, I’ll get to Clippy already. All credit to <a href="https://www.smore.com" rel="noopener">Smore</a> for creating a HTML, CSS, and JavaScript implementation of clippy <strong>in a weekend</strong>; <a href="https://www.smore.com/clippy-js" rel="noopener">ClippyJS</a> is impressive! Let’s use it in our app.</p>\n<p>Smore recommend downloading the CSS and JavaScript files from the ClippyJS GitHub repository, but let’s use this as an oppurtunity to learn how using dependencies from npm works. npm is Node.js’ package manager we used earlier to install <code>nw</code>. ClippyJS isn\'t on npm (yet) but it is on GitHub and npm allows us to install it straight from GitHub by running <code>npm install --save smore-inc/clippy.js</code>. That would work but if the ClippyJS repository wasn\'t missing the manifest every Node.js module needs. So I\'ve forked the ClippyJS repository and added the <code>package.json</code> (note that I\'ve added jQuery under <code>dependencies</code>). Now, running <code>npm install --save adam-lynch/clippy.js#pkg</code> will install ClippyJS into <code>clippy-desktop/node_modules</code>. To include ClippyJS we have to reference the CSS and JavaScript files just like we would in any Web app, adding <code>&lt;link href=&quot;node_modules/clippy.js/build/clippy.css&quot; rel=&quot;stylesheet&quot;/&gt;</code> and <code>&lt;script src=&quot;node_modules/clippy.js/build/clippy.min.js&quot;&gt;&lt;/script&gt;</code> to the correct files.</p>\n<p>Note: Just in case you’ve noticed that Clippy.desktop’s <code>index.html</code> doesn\'t reference each file like I\'ve just said; I\'ve combined the dependencies into <code>third-party.js</code> just to make it cleaner, similarly to what\'s described in <a href="https://adamlynch.com/hassle-free-third-party-dependencies/" rel="noopener">Hassle-free third-party dependencies</a>.</p>\n<p>The ClippyJS site says we’ll need to programatically show Clippy ourselves, so let’s create a <code>script.js</code> with the following contents:</p>\n<pre><code class="language-javascript">clippy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">\'Clippy\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>agent<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    agent<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n<p>To resurrect Clippy:</p>\n<ul>\n<li>Make sure you’ve added a <code>&lt;script&gt;</code> linking to your <code>script.js</code>.</li>\n<li>Kill the running app.</li>\n<li>Run <code>nw clippy-desktop</code> again.</li>\n</ul>\n<h3><a id="what-now" class="post-header-anchor" href="#what-now" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>What now?!</h3>\n<p>Huh. It’s not working. Open the DevTools and check for any errors. Hmm…</p>\n<pre><code class="language-javascript">Failed to load resource<span class="token punctuation">:</span> net<span class="token punctuation">:</span><span class="token punctuation">:</span>ERR\\_FILE\\_NOT\\_FOUND\n</code></pre>\n<p>Ah, the problem is <a href="https://github.com/smore-inc/clippy.js/blob/master/src/load.js#L1" rel="noopener">this line</a> in the ClippyJS source:</p>\n<pre><code class="language-javascript">clippy<span class="token punctuation">.</span>BASE_PATH <span class="token operator">=</span> <span class="token string">\'//s3.amazonaws.com/clippy.js/Agents/\'</span><span class="token punctuation">;</span>\n</code></pre>\n<p>The main ClippyJS file seems to be requesting more scripts from Amazon S3. See that the URL begins with <code>//</code> That\'s a <a href="http://www.paulirish.com/2010/the-protocol-relative-url/" rel="noopener">protocol-relative URL</a>, i.e. if the current site was accessed over HTTPS, HTTPS will be used as the protocol when requesting this URL, or HTTP if the site was accessed over HTTP. But the protocol in our case is neither HTTP nor HTTPs; our <code>index.html</code> is a local file and accessed as such. In our case, this URL would be expanded tofile:///s3.amazonaws.com.... So if you want your Web app to work on the desktop, avoid protocol-relative URLs. To fix this line, you would need to have something like the following:</p>\n<pre><code class="language-javascript">clippy<span class="token punctuation">.</span>BASE_PATH <span class="token operator">=</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol <span class="token operator">===</span> <span class="token string">\'file:\'</span> <span class="token operator">?</span> <span class="token string">\'https:\'</span> <span class="token punctuation">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">\'//s3.amazonaws.com/clippy.js/Agents/\'</span><span class="token punctuation">;</span>\n</code></pre>\n<p>So, after I updated this in my fork of ClippyJS, I re-ran the <code>npm install</code> command and re-launched the app.</p>\n<h3><a id="think-outside-the-box" class="post-header-anchor" href="#think-outside-the-box" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Think outside the box</h3>\n<p>It could be prettier though right? Let’s start by making the window a bit smaller, removing the frame, and removing the toolbar (the search bar, etc.). Add the following to the app manifest:</p>\n<pre><code class="language-javascript"><span class="token string">"window"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n  <span class="token string">"frame"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  <span class="token string">"toolbar"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  <span class="token string">"width"</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>\n  <span class="token string">"height"</span><span class="token punctuation">:</span> <span class="token number">300</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<p>That’s it.</p>\n<p>Although if you’re on Mac OS X you’ll notice there’s a <a href="https://github.com/nwjs/nw.js/issues/3645" rel="noopener">weird bug</a> where the window title is still shown. To workaround this, we can give the window a dummy title. We only want to do this if the app is running on Mac though, so let’s use Node.js’ core <code>os</code> module to detect the platform. Adding this to our <code>script.js</code> should be enough to solve the problem:</p>\n<pre><code class="language-javascript"><span class="token keyword">var</span> isMac <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'os\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">platform</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">\'darwin\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span>isMac<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">\'\\u3000\'</span><span class="token punctuation">;</span> <span class="token comment">// to get around https://github.com/nwjs/nw.js/issues/3645</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<figure>\n          <a href="/images/blog-content/resurrecting-clippy/frameless.png"><img src="/images/blog-content/resurrecting-clippy/frameless.png" alt=""/></a>\n          <figcaption><p>The frameless app.</p>\n</figcaption>\n        </figure><p>Ok, it’s better but let’s ditch that background.</p>\n<p>Transparency</p>\n<p>Let’s go back to our manifest and add a <code>transparent</code> property inside <code>window</code>;</p>\n<pre><code class="language-javascript"><span class="token string">"window"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n  <span class="token string">"frame"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  <span class="token string">"toolbar"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  <span class="token string">"width"</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>\n  <span class="token string">"height"</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>\n  <span class="token string">"transparent"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<p>This gives the app the <em>ability</em> to be transparent, but doesn’t make it transparent. This can be toggled programmatically as well. Note: depending on the platform, you may need to jump through some extra hoops, see <a href="https://www.packtpub.com/books/content/transparency-and-nwjs" rel="noopener">Transparency and NW.js</a>. All that’s left is to make sure your elements are not</p>\n<p>All that’s left is to make sure your elements are not opague; for example:</p>\n<pre><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n  <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<h3><a id="dragging" class="post-header-anchor" href="#dragging" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Dragging</h3>\n<p>We no longer have a window title bar so we can’t drag it around anymore. CSS to the rescue, again!</p>\n<pre><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n  <span class="token property">-webkit-app-region</span><span class="token punctuation">:</span> drag<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<p>Now you can drag the app by clicking and holding anywhere on the <code>body</code>.</p>\n<p>Unfortunately, double-clicking a draggable area triggers the window to maximize on some platforms. So what we’ll do is tell the user that double clicking will close clippy.desktop, thanks to clippy.js’ <code>agent.speak</code> method which shows a speech bubble. Just to annoy the user even more, we won’t. Instead, Clippy will disappear and reappear again after a couple of seconds. This is done in the <code>clippy.load</code> callback:</p>\n<pre><code class="language-javascript"><span class="token comment">// show clippy</span>\nclippy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">\'Clippy\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>agent<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    agent<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">var</span> intiialSpeechTimeoutId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        agent<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token string">"Need some help closing me? Try double-clicking..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">var</span> windowX <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n    <span class="token keyword">var</span> windowY <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        windowX <span class="token operator">=</span> win<span class="token punctuation">.</span>x<span class="token punctuation">;</span>\n        windowY <span class="token operator">=</span> win<span class="token punctuation">.</span>y<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// ...</span>\n\n    <span class="token comment">// Since double-clicking draggable areas triggers maximizing on some platforms, when tell the user double-clicking</span>\n    <span class="token comment">// closes clippy but actually we\'ll hide the window, unmaximize, resize back to the normal size and show again</span>\n    <span class="token comment">// with a speech bubble</span>\n    win<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'maximize\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">\'hidden\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        win<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>intiialSpeechTimeoutId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>intiialSpeechTimeoutId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            intiialSpeechTimeoutId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            win<span class="token punctuation">.</span><span class="token function">unmaximize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            win<span class="token punctuation">.</span><span class="token function">resizeTo</span><span class="token punctuation">(</span>gui<span class="token punctuation">.</span>App<span class="token punctuation">.</span>manifest<span class="token punctuation">.</span>window<span class="token punctuation">.</span>width<span class="token punctuation">,</span> gui<span class="token punctuation">.</span>App<span class="token punctuation">.</span>manifest<span class="token punctuation">.</span>window<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            win<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>windowX<span class="token punctuation">,</span> windowY<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            win<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">\'hidden\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n                agent<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token string">"Need some help?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n<h3><a id="events" class="post-header-anchor" href="#events" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Events</h3>\n<p>Speaking of clicking, we also block clippy.js from adding any event handlers itself with jQuery;</p>\n<pre><code class="language-javascript">$<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">on</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre>\n<p>This is before <code>clippy.load</code> is called. We want to handle clicks and everything else ourselves.</p>\n<p>Animating Clippy on click should be easy right? You might not be aware but if a window is not focused on Mac OS X, the first click focuses the window and the second click actually clicks the element. This is expected behavior on Mac OS X. Note: This is why you never create HTML window controls and bars when using NW.js or Electron, as it would take two clicks to minimize a window for example.</p>\n<p>This is why I use the window’s <code>focus</code> event instead. Whenever the window is focused, I trigger an animation and blur the window.</p>\n<pre><code class="language-javascript"><span class="token comment">// to be safe: use focus as a click handler kinda, to trigger animations. Blur when done so every click triggers</span>\n<span class="token comment">// an animation</span>\nwin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>‘focus’<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  agent<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  win<span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n<p>Note: Cross-platform support for blurring isn’t 100% solid so it’s best to just trigger an animation every once in awhile anyway as well.</p>\n<h3><a id="i-see-you-have-no-internet-connection" class="post-header-anchor" href="#i-see-you-have-no-internet-connection" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>I see you have no internet connection</h3>\n<p>If you’re offline, clippy.desktop doesn’t show anything. Why? Let’s take a look at the line in clippy.js again:</p>\n<pre><code class="language-javascript">clippy<span class="token punctuation">.</span>BASE_PATH <span class="token operator">=</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol <span class="token operator">===</span> ‘file<span class="token punctuation">:</span>’ <span class="token operator">?</span> ‘https<span class="token punctuation">:</span>’ <span class="token punctuation">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span> <span class="token operator">+</span> ‘<span class="token comment">//s3.amazonaws.com/clippy.js/Agents/’;</span>\n</code></pre>\n<p>Why is it doing anything at all with URLs? I’m not sure why it wasn’t bundled into one script but ClippyJS requests additional (remote) scripts from within the base clippy.js script. This doesn’t make sense for a desktop app.</p>\n<p><img src="/images/blog-content/resurrecting-clippy/mental.png" alt=""></p>\n<h3><a id="mental-mode" class="post-header-anchor" href="#mental-mode" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Mental mode</h3>\n<p>This is where you come in. This implementation is just a start. Feel free to <a href="https://github.com/teamwork/clippy.desktop" rel="noopener">improve it in a pull-request</a>. After all, it’s just HTML, CSS, and Javascript. I’m not suggesting that you add a mode which makes Clippy disappear on <code>mouseover</code>, reappear elsewhere, jump around the place, driving the user insane. Definitely not.</p>\n<h3><a id="tldr" class="post-header-anchor" href="#tldr" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>TL;DR</h3>\n<ul>\n<li>It’s easy to make a desktop (Web) app with NW.js.</li>\n<li>You can access all of Node.js, its module system and npm.</li>\n<li>Don’t use protocol-less URIs.</li>\n<li>Be aware of how Mac OS X treats clicks on unfocused windows.</li>\n<li>Make sure your app works offline.</li>\n<li>Have fun.</li>\n</ul>\n',attributes:{date:"2016-03-08T00:00:00.000Z",summary:"Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat...",original:{blogLink:"https://engineroom.teamwork.com",blogName:"Teamwork's Engine Room",url:"https://engineroom.teamwork.com/resurrecting-clippy-89843fcc9871"},tags:[{id:"clippy",name:"clippy"},{id:"desktop",name:"desktop"},{id:"app",name:"app"},{id:"nwjs",name:"NW.js"},{id:"node-webkit",name:"node-webkit"},{id:"javascript",name:"javascript"}],title:"Resurrecting Clippy",updated_at:"2018-01-11T19:45:11.000Z",photo:"/images/blog-content/resurrecting-clippy/osx.png"},title:"Resurrecting Clippy",renderedSummary:"<p>Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat...</p>\n",rendered:'<h2><a id="resurrecting-clippy" class="post-header-anchor" href="#resurrecting-clippy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Resurrecting Clippy</h2>\n<p><img src="/images/blog-content/resurrecting-clippy/osx.png" alt="Clippy on Mac OS X"></p>\n<p>Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat Clippy? Yeah, you should be ashamed of yourself. You either loved or hated Clippy. <strong>Spoiler</strong>: after a lot of backlash, Microsoft secretly ran a smear campaign against its own little paperclip, including an anti-Clippy Website, a “Kill Clippy” game, and more. <em>“I see you’re trying to destroy me, would you like help with that?”</em> Clippy said. Eventually retiring Clippy to fanfare, Microsoft masterfully spun your anger into positive press. Shame on all of you.</p>\n<p>I’m sure you’ve only recently stopped having guilt-ridden nightmares of a dancing paperclip, but I’ve good news. I’ve made a desktop application which not only brings Clippy back to Windows, but introduces Mac and Linux users to 90’s Siri too! Clippy.desktop is available for download at <a href="https://teamwork.github.io/clippy.desktop" rel="noopener">teamwork.github.io/clippy.desktop</a>.</p>\n<p>Why? Because I can. There’s just something satisfying about seeing Clippy on Windows 10 or El Capitan. It wasn’t even hard; I feel like an imposter for simply throwing together a few open-source things, so I’m going to use this an opportunity to share how easy it is to make a desktop app with NW.js (and a few pitfalls). For extra measure, here’s an embarrassing photo of me as a child:</p>\n<figure>\n          <a href="/images/blog-content/resurrecting-clippy/embarrassing.jpg"><img src="/images/blog-content/resurrecting-clippy/embarrassing.jpg" alt=""/></a>\n          <figcaption><p>Look at those curls.</p>\n</figcaption>\n        </figure><h3><a id="desktop-web-apps" class="post-header-anchor" href="#desktop-web-apps" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Desktop (Web) apps</h3>\n<p>Quickly moving on, <a href="http://nwjs.io/" rel="noopener">NW.js</a> was an obvious choice to make the app as we built the <a href="https://teamwork.com/chat" rel="noopener">Teamwork Chat</a> desktop apps with it. NW.js, along with the trendier <a href="http://electron.atom.io/" rel="noopener">Electron</a>, combines Chromium and Node.js to allow you to create a desktop application from a Web application. So the resultant executable is a standalone appplication just like Chrome which has access to all of the Node.js API as well. It’s great.</p>\n<p>It doesn’t take long to get up and running either. You technically don’t need Node.js to develop an NW.js app, but I’ll assume you have it. First, grab the offical npm package; run <code>npm install -g nw</code> to make it available from anywhere on your machine. In a new directory named <code>clippy-desktop</code>, create a HTML file with whatever content you\'d like. All we need now is an &quot;app manifest&quot;; run <code>npm init</code> and follow the steps the generate one. Enter the name of your HTML file when asked for the <code>main</code> file. Why <code>npm init</code>? The app manifest is basically the same as any npm module\'s <code>package.json</code> (where its dependencies are listed, and so on.). So, now you have a basic manifest looks something like this:</p>\n<pre><code class="language-javascript"><span class="token punctuation">{</span>\n  <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"clippy-desktop"</span><span class="token punctuation">,</span>\n  <span class="token string">"version"</span><span class="token punctuation">:</span> <span class="token string">"0.0.1"</span><span class="token punctuation">,</span>\n  <span class="token string">"main"</span><span class="token punctuation">:</span> <span class="token string">"index.html"</span><span class="token punctuation">,</span>\n  <span class="token string">"dependencies"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<p>Now, run <code>nw clippy-desktop</code>.</p>\n<figure>\n          <a href="/images/blog-content/resurrecting-clippy/running.png"><img src="/images/blog-content/resurrecting-clippy/running.png" alt=""/></a>\n          \n        </figure><p>Ta-da! Your app is running. If you don’t believe me, click the hamburger icon in the top right to access the DevTools and inspect the HTML.</p>\n<h3><a id="hello-clippy" class="post-header-anchor" href="#hello-clippy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Hello, Clippy!</h3>\n<p>Ok, ok, I’ll get to Clippy already. All credit to <a href="https://www.smore.com" rel="noopener">Smore</a> for creating a HTML, CSS, and JavaScript implementation of clippy <strong>in a weekend</strong>; <a href="https://www.smore.com/clippy-js" rel="noopener">ClippyJS</a> is impressive! Let’s use it in our app.</p>\n<p>Smore recommend downloading the CSS and JavaScript files from the ClippyJS GitHub repository, but let’s use this as an oppurtunity to learn how using dependencies from npm works. npm is Node.js’ package manager we used earlier to install <code>nw</code>. ClippyJS isn\'t on npm (yet) but it is on GitHub and npm allows us to install it straight from GitHub by running <code>npm install --save smore-inc/clippy.js</code>. That would work but if the ClippyJS repository wasn\'t missing the manifest every Node.js module needs. So I\'ve forked the ClippyJS repository and added the <code>package.json</code> (note that I\'ve added jQuery under <code>dependencies</code>). Now, running <code>npm install --save adam-lynch/clippy.js#pkg</code> will install ClippyJS into <code>clippy-desktop/node_modules</code>. To include ClippyJS we have to reference the CSS and JavaScript files just like we would in any Web app, adding <code>&lt;link href=&quot;node_modules/clippy.js/build/clippy.css&quot; rel=&quot;stylesheet&quot;/&gt;</code> and <code>&lt;script src=&quot;node_modules/clippy.js/build/clippy.min.js&quot;&gt;&lt;/script&gt;</code> to the correct files.</p>\n<p>Note: Just in case you’ve noticed that Clippy.desktop’s <code>index.html</code> doesn\'t reference each file like I\'ve just said; I\'ve combined the dependencies into <code>third-party.js</code> just to make it cleaner, similarly to what\'s described in <a href="https://adamlynch.com/hassle-free-third-party-dependencies/" rel="noopener">Hassle-free third-party dependencies</a>.</p>\n<p>The ClippyJS site says we’ll need to programatically show Clippy ourselves, so let’s create a <code>script.js</code> with the following contents:</p>\n<pre><code class="language-javascript">clippy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">\'Clippy\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>agent<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    agent<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n<p>To resurrect Clippy:</p>\n<ul>\n<li>Make sure you’ve added a <code>&lt;script&gt;</code> linking to your <code>script.js</code>.</li>\n<li>Kill the running app.</li>\n<li>Run <code>nw clippy-desktop</code> again.</li>\n</ul>\n<h3><a id="what-now" class="post-header-anchor" href="#what-now" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>What now?!</h3>\n<p>Huh. It’s not working. Open the DevTools and check for any errors. Hmm…</p>\n<pre><code class="language-javascript">Failed to load resource<span class="token punctuation">:</span> net<span class="token punctuation">:</span><span class="token punctuation">:</span>ERR\\_FILE\\_NOT\\_FOUND\n</code></pre>\n<p>Ah, the problem is <a href="https://github.com/smore-inc/clippy.js/blob/master/src/load.js#L1" rel="noopener">this line</a> in the ClippyJS source:</p>\n<pre><code class="language-javascript">clippy<span class="token punctuation">.</span>BASE_PATH <span class="token operator">=</span> <span class="token string">\'//s3.amazonaws.com/clippy.js/Agents/\'</span><span class="token punctuation">;</span>\n</code></pre>\n<p>The main ClippyJS file seems to be requesting more scripts from Amazon S3. See that the URL begins with <code>//</code> That\'s a <a href="http://www.paulirish.com/2010/the-protocol-relative-url/" rel="noopener">protocol-relative URL</a>, i.e. if the current site was accessed over HTTPS, HTTPS will be used as the protocol when requesting this URL, or HTTP if the site was accessed over HTTP. But the protocol in our case is neither HTTP nor HTTPs; our <code>index.html</code> is a local file and accessed as such. In our case, this URL would be expanded tofile:///s3.amazonaws.com.... So if you want your Web app to work on the desktop, avoid protocol-relative URLs. To fix this line, you would need to have something like the following:</p>\n<pre><code class="language-javascript">clippy<span class="token punctuation">.</span>BASE_PATH <span class="token operator">=</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol <span class="token operator">===</span> <span class="token string">\'file:\'</span> <span class="token operator">?</span> <span class="token string">\'https:\'</span> <span class="token punctuation">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">\'//s3.amazonaws.com/clippy.js/Agents/\'</span><span class="token punctuation">;</span>\n</code></pre>\n<p>So, after I updated this in my fork of ClippyJS, I re-ran the <code>npm install</code> command and re-launched the app.</p>\n<h3><a id="think-outside-the-box" class="post-header-anchor" href="#think-outside-the-box" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Think outside the box</h3>\n<p>It could be prettier though right? Let’s start by making the window a bit smaller, removing the frame, and removing the toolbar (the search bar, etc.). Add the following to the app manifest:</p>\n<pre><code class="language-javascript"><span class="token string">"window"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n  <span class="token string">"frame"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  <span class="token string">"toolbar"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  <span class="token string">"width"</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>\n  <span class="token string">"height"</span><span class="token punctuation">:</span> <span class="token number">300</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<p>That’s it.</p>\n<p>Although if you’re on Mac OS X you’ll notice there’s a <a href="https://github.com/nwjs/nw.js/issues/3645" rel="noopener">weird bug</a> where the window title is still shown. To workaround this, we can give the window a dummy title. We only want to do this if the app is running on Mac though, so let’s use Node.js’ core <code>os</code> module to detect the platform. Adding this to our <code>script.js</code> should be enough to solve the problem:</p>\n<pre><code class="language-javascript"><span class="token keyword">var</span> isMac <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'os\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">platform</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">\'darwin\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span>isMac<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">\'\\u3000\'</span><span class="token punctuation">;</span> <span class="token comment">// to get around https://github.com/nwjs/nw.js/issues/3645</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<figure>\n          <a href="/images/blog-content/resurrecting-clippy/frameless.png"><img src="/images/blog-content/resurrecting-clippy/frameless.png" alt=""/></a>\n          <figcaption><p>The frameless app.</p>\n</figcaption>\n        </figure><p>Ok, it’s better but let’s ditch that background.</p>\n<p>Transparency</p>\n<p>Let’s go back to our manifest and add a <code>transparent</code> property inside <code>window</code>;</p>\n<pre><code class="language-javascript"><span class="token string">"window"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n  <span class="token string">"frame"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  <span class="token string">"toolbar"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  <span class="token string">"width"</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>\n  <span class="token string">"height"</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>\n  <span class="token string">"transparent"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<p>This gives the app the <em>ability</em> to be transparent, but doesn’t make it transparent. This can be toggled programmatically as well. Note: depending on the platform, you may need to jump through some extra hoops, see <a href="https://www.packtpub.com/books/content/transparency-and-nwjs" rel="noopener">Transparency and NW.js</a>. All that’s left is to make sure your elements are not</p>\n<p>All that’s left is to make sure your elements are not opague; for example:</p>\n<pre><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n  <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<h3><a id="dragging" class="post-header-anchor" href="#dragging" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Dragging</h3>\n<p>We no longer have a window title bar so we can’t drag it around anymore. CSS to the rescue, again!</p>\n<pre><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>\n  <span class="token property">-webkit-app-region</span><span class="token punctuation">:</span> drag<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<p>Now you can drag the app by clicking and holding anywhere on the <code>body</code>.</p>\n<p>Unfortunately, double-clicking a draggable area triggers the window to maximize on some platforms. So what we’ll do is tell the user that double clicking will close clippy.desktop, thanks to clippy.js’ <code>agent.speak</code> method which shows a speech bubble. Just to annoy the user even more, we won’t. Instead, Clippy will disappear and reappear again after a couple of seconds. This is done in the <code>clippy.load</code> callback:</p>\n<pre><code class="language-javascript"><span class="token comment">// show clippy</span>\nclippy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">\'Clippy\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>agent<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    agent<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">var</span> intiialSpeechTimeoutId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        agent<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token string">"Need some help closing me? Try double-clicking..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">var</span> windowX <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n    <span class="token keyword">var</span> windowY <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        windowX <span class="token operator">=</span> win<span class="token punctuation">.</span>x<span class="token punctuation">;</span>\n        windowY <span class="token operator">=</span> win<span class="token punctuation">.</span>y<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// ...</span>\n\n    <span class="token comment">// Since double-clicking draggable areas triggers maximizing on some platforms, when tell the user double-clicking</span>\n    <span class="token comment">// closes clippy but actually we\'ll hide the window, unmaximize, resize back to the normal size and show again</span>\n    <span class="token comment">// with a speech bubble</span>\n    win<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'maximize\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">\'hidden\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        win<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>intiialSpeechTimeoutId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>intiialSpeechTimeoutId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            intiialSpeechTimeoutId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            win<span class="token punctuation">.</span><span class="token function">unmaximize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            win<span class="token punctuation">.</span><span class="token function">resizeTo</span><span class="token punctuation">(</span>gui<span class="token punctuation">.</span>App<span class="token punctuation">.</span>manifest<span class="token punctuation">.</span>window<span class="token punctuation">.</span>width<span class="token punctuation">,</span> gui<span class="token punctuation">.</span>App<span class="token punctuation">.</span>manifest<span class="token punctuation">.</span>window<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            win<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>windowX<span class="token punctuation">,</span> windowY<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            win<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">\'hidden\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n                agent<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token string">"Need some help?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n<h3><a id="events" class="post-header-anchor" href="#events" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Events</h3>\n<p>Speaking of clicking, we also block clippy.js from adding any event handlers itself with jQuery;</p>\n<pre><code class="language-javascript">$<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">on</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre>\n<p>This is before <code>clippy.load</code> is called. We want to handle clicks and everything else ourselves.</p>\n<p>Animating Clippy on click should be easy right? You might not be aware but if a window is not focused on Mac OS X, the first click focuses the window and the second click actually clicks the element. This is expected behavior on Mac OS X. Note: This is why you never create HTML window controls and bars when using NW.js or Electron, as it would take two clicks to minimize a window for example.</p>\n<p>This is why I use the window’s <code>focus</code> event instead. Whenever the window is focused, I trigger an animation and blur the window.</p>\n<pre><code class="language-javascript"><span class="token comment">// to be safe: use focus as a click handler kinda, to trigger animations. Blur when done so every click triggers</span>\n<span class="token comment">// an animation</span>\nwin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>‘focus’<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  agent<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  win<span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n<p>Note: Cross-platform support for blurring isn’t 100% solid so it’s best to just trigger an animation every once in awhile anyway as well.</p>\n<h3><a id="i-see-you-have-no-internet-connection" class="post-header-anchor" href="#i-see-you-have-no-internet-connection" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>I see you have no internet connection</h3>\n<p>If you’re offline, clippy.desktop doesn’t show anything. Why? Let’s take a look at the line in clippy.js again:</p>\n<pre><code class="language-javascript">clippy<span class="token punctuation">.</span>BASE_PATH <span class="token operator">=</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol <span class="token operator">===</span> ‘file<span class="token punctuation">:</span>’ <span class="token operator">?</span> ‘https<span class="token punctuation">:</span>’ <span class="token punctuation">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span> <span class="token operator">+</span> ‘<span class="token comment">//s3.amazonaws.com/clippy.js/Agents/’;</span>\n</code></pre>\n<p>Why is it doing anything at all with URLs? I’m not sure why it wasn’t bundled into one script but ClippyJS requests additional (remote) scripts from within the base clippy.js script. This doesn’t make sense for a desktop app.</p>\n<p><img src="/images/blog-content/resurrecting-clippy/mental.png" alt=""></p>\n<h3><a id="mental-mode" class="post-header-anchor" href="#mental-mode" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Mental mode</h3>\n<p>This is where you come in. This implementation is just a start. Feel free to <a href="https://github.com/teamwork/clippy.desktop" rel="noopener">improve it in a pull-request</a>. After all, it’s just HTML, CSS, and Javascript. I’m not suggesting that you add a mode which makes Clippy disappear on <code>mouseover</code>, reappear elsewhere, jump around the place, driving the user insane. Definitely not.</p>\n<h3><a id="tldr" class="post-header-anchor" href="#tldr" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>TL;DR</h3>\n<ul>\n<li>It’s easy to make a desktop (Web) app with NW.js.</li>\n<li>You can access all of Node.js, its module system and npm.</li>\n<li>Don’t use protocol-less URIs.</li>\n<li>Be aware of how Mac OS X treats clicks on unfocused windows.</li>\n<li>Make sure your app works offline.</li>\n<li>Have fun.</li>\n</ul>\n',summary:"Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat...\n",original:{blogLink:"https://engineroom.teamwork.com",blogName:"Teamwork's Engine Room",url:"https://engineroom.teamwork.com/resurrecting-clippy-89843fcc9871"},photo:"/images/blog-content/resurrecting-clippy/osx.png",keywords:["clippy","desktop","app","NW.js","node-webkit","javascript"],published_at:"2016-03-08T00:00:00.000Z",updated_at:"2018-01-11T19:45:11.000Z",year:2016,month:3,day:9}}],error:null,state:{nameToShow:"Adam Lynch",githubAccountUrl:"https://github.com/adam-lynch",siteUrl:"https://adamlynch.com",siteTitle:"Adam Lynch",repositoryUrl:"https://github.com/adam-lynch/adam-lynch.github.io"},serverRendered:!0}</script><script src="/_nuxt/manifest.7ea73c6a3544d21766bf.js" defer></script><script src="/_nuxt/layouts/default.4f3d0ea5a04a4a70b7c1.js" defer></script><script src="/_nuxt/2.720975b4fca5c1ca409a.js" defer></script><script src="/_nuxt/vendor.ce05078a33ab89125ee8.js" defer></script><script src="/_nuxt/app.3b3400f1b40887e49e2f.js" defer></script>

    <script src="https://use.typekit.net/tci5xbk.js"></script>
    <script>try{Typekit.load({async:!0})}catch(a){}</script>
    <script>!function(e,a,t,n,c,g,s){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,g=a.createElement("script"),s=a.getElementsByTagName("script")[0],g.async=1,g.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(g,s)}(window,document),ga("create","UA-31546953-1","auto"),ga("send","pageview")</script>
  

