{
  "id": "dealing-with-long-paths",
  "slug": "dealing-with-long-paths",
  "highlightedLanguages": [
    "javascript"
  ],
  "source": "---\ndate: 2015-07-01\nsummary: You might have been unfortunate enough to learn that Windows has a 256-character limit on file paths. You could’ve run into this problem locally or on end users’ machines. We’ve created a simple little module called gulp-path-length to…\noriginal:\n  blogLink: https://engineroom.teamwork.com\n  blogName: Teamwork's Engine Room\n  url: https://engineroom.teamwork.com/dealing-with-long-paths-fcf412649a01\ntags:\n  - NW.js\n  - node-webkit\n  - npm\n  - distribution\n  - paths\n  - windows\n---\n\n## Dealing with long paths\n\nYou might have been unfortunate enough to learn that Windows has a 256-character limit on file paths. You could’ve run into this problem locally or on end users’ machines. We’ve created a simple little module called [gulp-path-length](https://github.com/Teamwork/gulp-path-length) to give you a helping hand with this.\n\n![A helping hand](/images/blog-content/dealing-with-long-paths/helping-hand.gif)\n\n#### npm\n\nNeither this problem nor our solution is exclusive to [Node.js](https://nodejs.org/), but a lot of the victims of the path length problem were probably running Node.js on Windows. Windows users know that they get left out in the cold often by [npm](https://www.npmjs.com/) package maintainers but even [the design of npm itself is a problem from the get-go](https://github.com/joyent/node/issues/6960#issuecomment-46704998).\n\nnpm stores your dependencies (listed in your `package.json`) in a `node_modules` directory. If those dependencies have dependencies of their own, they're stored in their own `node_modules` directory (i.e. `your-project/node_modules/a/node_modules/b/`) and so on recursively. It's nice, but in hindsight, it's obviously incompatible with Windows's path length limit.\n\n#### Delete delete delete\n\nMost people have probably been lucky enough to only have come across this problem when trying to delete dependencies and then Windows complains that the path is too long.\n\nA simple way around this is to take a module halfway down deep into your dependency graph (i.e. `node_modules/a/node_modules/b/node_modules/c/.../node_modules/h/`) in Windows Explorer and move it somewhere closer to the root (e.g. `node_modules/`) to cut the file path down before trying to delete it again. This would have to be repeated for every culprit.\n\nThere are also some tools which could help. I’ve noticed that you can delete really long paths while using [7-Zip](http://www.7-zip.org/) File Manager to browse files.\n\n#### Runtime errors\n\nIf you’ve ran into actual bugs caused by this, you could find a module halfway down the dependency graph and add it as a dependency to your project so it will be installed under the top level `node_modules` and not a `node_modules` directory `n` levels deep. Make sure to install the correct version and test thoroughly.\n\nThere are also a few Node modules out there which “flatten” your dependency graph. The downside to these modules is that if there is a conflict (package A depends on version 1.0.0 of package Z and package B depends on version 3.2.1 of package Z) then the latest version of the module (package Z) is used, which could be problematic. So, be careful.\n\n#### Can’t npm fix this?\n\n~~You might see people reference Windows APIs (which support long paths) as a possible fix but it is [very unlikely](https://github.com/joyent/node/issues/6960#issuecomment-46704998) this will be fixed in npm. `[npm dedupe](https://docs.npmjs.com/cli/dedupe)` _should_ help with this too but it's not reliable in my experience.~~\n\nThis has been fixed as of [npm 3.0.0](https://github.com/npm/npm/releases/tag/v3.0.0).\n\n>Your dependencies will now be installed _maximally_ flat. Insofar as is possible, all of your dependencies, and their dependencies, and THEIR dependencies will be installed in your project’s `node_modules` folder with no nesting. You'll only see modules nested underneath one another when two (or more) modules have conflicting dependencies.\n\nExcuse me…\n\n:::figure dealing-with-long-paths/dance.gif \\* Dances \\*\n:::\n\n#### Manually checking for exceedingly long paths\n\nUp until now, we’ve had to routinely check for long paths using [Path Length Checker](https://pathlengthchecker.codeplex.com/) (on Windows) but a manual check is not good enough as stuff can still slip through the net.\n\n#### Introducing gulp-path-length\n\nSo, we’ve created a simple [Gulp](http://gulpjs.com) plugin help with this; [gulp-path-length](https://github.com/Teamwork/gulp-path-length). You could use it like this in a Gulp task:\n\n```javascript\nvar gulp = require('gulp');\nvar pathLength = require('gulp-path-length');\n\ngulp.task('default', function(){\n  gulp.src('./example/path/to/directory/**', {read: false})\n    .pipe(pathLength());\n});\n```\n\nIf all is well, nothing will happen. If you have a path exceeding 256 characters, the Gulp task will stop and an error will reveal the offending path. This is really fast either way as Gulp doesn't need to read the contents of the files. The limit can be changed with a parameter; i.e. `.pipe(pathLength({ maxLength: 50 });`.\n\nThis is fine if it's just for you locally, but there are bigger fish to fry.\n\n### Distributed long paths\n\nWhat if there are multiple developers working on your project? What if a developer is using Mac OS X or Linux? There could easily be false positives. It's one thing having issues locally or within a team, it's a whole other thing to have path length problems in production on end users' machines.\n\nWe've run into this with [Teamwork Chat](https://www.teamwork.com/chat) for Windows as it's built on [NW.js](https://github.com/nwjs/nw.js) (formerly node-webkit) and can contain long paths (i.e. dependencies from npm). Depending on how long the current user's username was, the user might've seen something like this when they tried to launch Teamwork Chat:\n\nA dummy application. None of our app code is executed. This means no error reports and no way the app could even auto-update once a patch was released. As a maintainer of [node-webkit-builder](https://github.com/mllrsohn/node-webkit-builder), I know we're not the only ones who have faced this problem.\n\n### Is there anything we can do?\n\nOnce the code is shipped, it's too late. Luckily, we have a rough idea where the files will exist on end users machines thanks to our Windows installer. We've added a `rewrite` option to gulp-path-length for simulating paths to prevent this problem ever ocurring again;\n\n```javascript\nvar gulp = require('gulp');\nvar pathLength = require('gulp-path-length');\n\ngulp.task('default', function() {\n  gulp.src('./example/path/to/directory/**', {\n    read: false\n  })\n  .pipe(pathLength({\n    rewrite: {\n      match: './example/path/to/directory/',\n      replacement: 'C:\\\\Users\\\\a-long-username-here\\\\AppData\\\\And\\\\So\\\\On'\n    }\n  }));\n});\n```\n\nSo, it doesn't matter where you are on your filesystem or which operating system you're using, it will test the length of files (which belong to the given `rewrite.match` directory) as if they're in a specific directory on Windows (i.e. `rewrite.replacement`). The outcome would be the same for any developer on the team.\n\nYou could run this before you ship your code but we've added this to a compilation build step so we catch it as early as possible. If a Mac developer adds really long paths to the project (like an npm dependency which depends on a chain of [lodash](https://lodash.com/) modules), they'll see right away that this will break stuff for some Windows users. For good measure, we also run it in a continuous integration step.\n\nAre we missing anything here? Feel free to send us a pull-request or create an issue over at the gulp-path-length [GitHub repository](https://github.com/Teamwork/gulp-path-length).\n",
  "unfilteredRenderedBody": "<h2><a id=\"dealing-with-long-paths\" class=\"post-header-anchor\" href=\"#dealing-with-long-paths\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Dealing with long paths</h2>\n<p>You might have been unfortunate enough to learn that Windows has a 256-character limit on file paths. You could’ve run into this problem locally or on end users’ machines. We’ve created a simple little module called <a href=\"https://github.com/Teamwork/gulp-path-length\" rel=\"noopener\">gulp-path-length</a> to give you a helping hand with this.</p>\n<p><img src=\"/images/blog-content/dealing-with-long-paths/helping-hand.gif\" alt=\"A helping hand\"></p>\n<h4><a id=\"npm\" class=\"post-header-anchor\" href=\"#npm\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>npm</h4>\n<p>Neither this problem nor our solution is exclusive to <a href=\"https://nodejs.org/\" rel=\"noopener\">Node.js</a>, but a lot of the victims of the path length problem were probably running Node.js on Windows. Windows users know that they get left out in the cold often by <a href=\"https://www.npmjs.com/\" rel=\"noopener\">npm</a> package maintainers but even <a href=\"https://github.com/joyent/node/issues/6960#issuecomment-46704998\" rel=\"noopener\">the design of npm itself is a problem from the get-go</a>.</p>\n<p>npm stores your dependencies (listed in your <code>package.json</code>) in a <code>node_modules</code> directory. If those dependencies have dependencies of their own, they're stored in their own <code>node_modules</code> directory (i.e. <code>your-project/node_modules/a/node_modules/b/</code>) and so on recursively. It's nice, but in hindsight, it's obviously incompatible with Windows's path length limit.</p>\n<h4><a id=\"delete-delete-delete\" class=\"post-header-anchor\" href=\"#delete-delete-delete\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Delete delete delete</h4>\n<p>Most people have probably been lucky enough to only have come across this problem when trying to delete dependencies and then Windows complains that the path is too long.</p>\n<p>A simple way around this is to take a module halfway down deep into your dependency graph (i.e. <code>node_modules/a/node_modules/b/node_modules/c/.../node_modules/h/</code>) in Windows Explorer and move it somewhere closer to the root (e.g. <code>node_modules/</code>) to cut the file path down before trying to delete it again. This would have to be repeated for every culprit.</p>\n<p>There are also some tools which could help. I’ve noticed that you can delete really long paths while using <a href=\"http://www.7-zip.org/\" rel=\"noopener\">7-Zip</a> File Manager to browse files.</p>\n<h4><a id=\"runtime-errors\" class=\"post-header-anchor\" href=\"#runtime-errors\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Runtime errors</h4>\n<p>If you’ve ran into actual bugs caused by this, you could find a module halfway down the dependency graph and add it as a dependency to your project so it will be installed under the top level <code>node_modules</code> and not a <code>node_modules</code> directory <code>n</code> levels deep. Make sure to install the correct version and test thoroughly.</p>\n<p>There are also a few Node modules out there which “flatten” your dependency graph. The downside to these modules is that if there is a conflict (package A depends on version 1.0.0 of package Z and package B depends on version 3.2.1 of package Z) then the latest version of the module (package Z) is used, which could be problematic. So, be careful.</p>\n<h4><a id=\"cant-npm-fix-this\" class=\"post-header-anchor\" href=\"#cant-npm-fix-this\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Can’t npm fix this?</h4>\n<p><s>You might see people reference Windows APIs (which support long paths) as a possible fix but it is <a href=\"https://github.com/joyent/node/issues/6960#issuecomment-46704998\" rel=\"noopener\">very unlikely</a> this will be fixed in npm. <code>[npm dedupe](https://docs.npmjs.com/cli/dedupe)</code> <em>should</em> help with this too but it's not reliable in my experience.</s></p>\n<p>This has been fixed as of <a href=\"https://github.com/npm/npm/releases/tag/v3.0.0\" rel=\"noopener\">npm 3.0.0</a>.</p>\n<blockquote>\n<p>Your dependencies will now be installed <em>maximally</em> flat. Insofar as is possible, all of your dependencies, and their dependencies, and THEIR dependencies will be installed in your project’s <code>node_modules</code> folder with no nesting. You'll only see modules nested underneath one another when two (or more) modules have conflicting dependencies.</p>\n</blockquote>\n<p>Excuse me…</p>\n<figure>\n          <a href=\"/images/blog-content/dealing-with-long-paths/dance.gif\"><img src=\"/images/blog-content/dealing-with-long-paths/dance.gif\" alt=\"\"/></a>\n          <figcaption><p>* Dances *</p>\n</figcaption>\n        </figure><h4><a id=\"manually-checking-for-exceedingly-long-paths\" class=\"post-header-anchor\" href=\"#manually-checking-for-exceedingly-long-paths\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Manually checking for exceedingly long paths</h4>\n<p>Up until now, we’ve had to routinely check for long paths using <a href=\"https://pathlengthchecker.codeplex.com/\" rel=\"noopener\">Path Length Checker</a> (on Windows) but a manual check is not good enough as stuff can still slip through the net.</p>\n<h4><a id=\"introducing-gulp-path-length\" class=\"post-header-anchor\" href=\"#introducing-gulp-path-length\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Introducing gulp-path-length</h4>\n<p>So, we’ve created a simple <a href=\"http://gulpjs.com\" rel=\"noopener\">Gulp</a> plugin help with this; <a href=\"https://github.com/Teamwork/gulp-path-length\" rel=\"noopener\">gulp-path-length</a>. You could use it like this in a Gulp task:</p>\n<pre><code class=\"language-javascript\"><span class=\"token keyword\">var</span> gulp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> pathLength <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-path-length'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'default'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  gulp<span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./example/path/to/directory/**'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>read<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">pathLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>If all is well, nothing will happen. If you have a path exceeding 256 characters, the Gulp task will stop and an error will reveal the offending path. This is really fast either way as Gulp doesn't need to read the contents of the files. The limit can be changed with a parameter; i.e. <code>.pipe(pathLength({ maxLength: 50 });</code>.</p>\n<p>This is fine if it's just for you locally, but there are bigger fish to fry.</p>\n<h3><a id=\"distributed-long-paths\" class=\"post-header-anchor\" href=\"#distributed-long-paths\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Distributed long paths</h3>\n<p>What if there are multiple developers working on your project? What if a developer is using Mac OS X or Linux? There could easily be false positives. It's one thing having issues locally or within a team, it's a whole other thing to have path length problems in production on end users' machines.</p>\n<p>We've run into this with <a href=\"https://www.teamwork.com/chat\" rel=\"noopener\">Teamwork Chat</a> for Windows as it's built on <a href=\"https://github.com/nwjs/nw.js\" rel=\"noopener\">NW.js</a> (formerly node-webkit) and can contain long paths (i.e. dependencies from npm). Depending on how long the current user's username was, the user might've seen something like this when they tried to launch Teamwork Chat:</p>\n<p>A dummy application. None of our app code is executed. This means no error reports and no way the app could even auto-update once a patch was released. As a maintainer of <a href=\"https://github.com/mllrsohn/node-webkit-builder\" rel=\"noopener\">node-webkit-builder</a>, I know we're not the only ones who have faced this problem.</p>\n<h3><a id=\"is-there-anything-we-can-do\" class=\"post-header-anchor\" href=\"#is-there-anything-we-can-do\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Is there anything we can do?</h3>\n<p>Once the code is shipped, it's too late. Luckily, we have a rough idea where the files will exist on end users machines thanks to our Windows installer. We've added a <code>rewrite</code> option to gulp-path-length for simulating paths to prevent this problem ever ocurring again;</p>\n<pre><code class=\"language-javascript\"><span class=\"token keyword\">var</span> gulp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> pathLength <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-path-length'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'default'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  gulp<span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./example/path/to/directory/**'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    read<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">pathLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    rewrite<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      match<span class=\"token punctuation\">:</span> <span class=\"token string\">'./example/path/to/directory/'</span><span class=\"token punctuation\">,</span>\n      replacement<span class=\"token punctuation\">:</span> <span class=\"token string\">'C:\\\\Users\\\\a-long-username-here\\\\AppData\\\\And\\\\So\\\\On'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>So, it doesn't matter where you are on your filesystem or which operating system you're using, it will test the length of files (which belong to the given <code>rewrite.match</code> directory) as if they're in a specific directory on Windows (i.e. <code>rewrite.replacement</code>). The outcome would be the same for any developer on the team.</p>\n<p>You could run this before you ship your code but we've added this to a compilation build step so we catch it as early as possible. If a Mac developer adds really long paths to the project (like an npm dependency which depends on a chain of <a href=\"https://lodash.com/\" rel=\"noopener\">lodash</a> modules), they'll see right away that this will break stuff for some Windows users. For good measure, we also run it in a continuous integration step.</p>\n<p>Are we missing anything here? Feel free to send us a pull-request or create an issue over at the gulp-path-length <a href=\"https://github.com/Teamwork/gulp-path-length\" rel=\"noopener\">GitHub repository</a>.</p>\n",
  "attributes": {
    "date": "2015-07-01T00:00:00.000Z",
    "summary": "You might have been unfortunate enough to learn that Windows has a 256-character limit on file paths. You could’ve run into this problem locally or on end users’ machines. We’ve created a simple little module called gulp-path-length to…",
    "original": {
      "blogLink": "https://engineroom.teamwork.com",
      "blogName": "Teamwork's Engine Room",
      "url": "https://engineroom.teamwork.com/dealing-with-long-paths-fcf412649a01"
    },
    "tags": [
      {
        "id": "nwjs",
        "name": "NW.js"
      },
      {
        "id": "node-webkit",
        "name": "node-webkit"
      },
      {
        "id": "npm",
        "name": "npm"
      },
      {
        "id": "distribution",
        "name": "distribution"
      },
      {
        "id": "paths",
        "name": "paths"
      },
      {
        "id": "windows",
        "name": "windows"
      }
    ],
    "title": "Dealing with long paths",
    "updated_at": "2018-08-05T16:25:28.067Z",
    "photo": "/images/blog-content/dealing-with-long-paths/helping-hand.gif"
  },
  "title": "Dealing with long paths",
  "renderedSummary": "<p>You might have been unfortunate enough to learn that Windows has a 256-character limit on file paths. You could’ve run into this problem locally or on end users’ machines. We’ve created a simple little module called gulp-path-length to…</p>\n",
  "rendered": "<h2><a id=\"dealing-with-long-paths\" class=\"post-header-anchor\" href=\"#dealing-with-long-paths\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Dealing with long paths</h2>\n<p>You might have been unfortunate enough to learn that Windows has a 256-character limit on file paths. You could’ve run into this problem locally or on end users’ machines. We’ve created a simple little module called <a href=\"https://github.com/Teamwork/gulp-path-length\" rel=\"noopener\">gulp-path-length</a> to give you a helping hand with this.</p>\n<p><img src=\"/images/blog-content/dealing-with-long-paths/helping-hand.gif\" alt=\"A helping hand\"></p>\n<h4><a id=\"npm\" class=\"post-header-anchor\" href=\"#npm\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>npm</h4>\n<p>Neither this problem nor our solution is exclusive to <a href=\"https://nodejs.org/\" rel=\"noopener\">Node.js</a>, but a lot of the victims of the path length problem were probably running Node.js on Windows. Windows users know that they get left out in the cold often by <a href=\"https://www.npmjs.com/\" rel=\"noopener\">npm</a> package maintainers but even <a href=\"https://github.com/joyent/node/issues/6960#issuecomment-46704998\" rel=\"noopener\">the design of npm itself is a problem from the get-go</a>.</p>\n<p>npm stores your dependencies (listed in your <code>package.json</code>) in a <code>node_modules</code> directory. If those dependencies have dependencies of their own, they're stored in their own <code>node_modules</code> directory (i.e. <code>your-project/node_modules/a/node_modules/b/</code>) and so on recursively. It's nice, but in hindsight, it's obviously incompatible with Windows's path length limit.</p>\n<h4><a id=\"delete-delete-delete\" class=\"post-header-anchor\" href=\"#delete-delete-delete\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Delete delete delete</h4>\n<p>Most people have probably been lucky enough to only have come across this problem when trying to delete dependencies and then Windows complains that the path is too long.</p>\n<p>A simple way around this is to take a module halfway down deep into your dependency graph (i.e. <code>node_modules/a/node_modules/b/node_modules/c/.../node_modules/h/</code>) in Windows Explorer and move it somewhere closer to the root (e.g. <code>node_modules/</code>) to cut the file path down before trying to delete it again. This would have to be repeated for every culprit.</p>\n<p>There are also some tools which could help. I’ve noticed that you can delete really long paths while using <a href=\"http://www.7-zip.org/\" rel=\"noopener\">7-Zip</a> File Manager to browse files.</p>\n<h4><a id=\"runtime-errors\" class=\"post-header-anchor\" href=\"#runtime-errors\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Runtime errors</h4>\n<p>If you’ve ran into actual bugs caused by this, you could find a module halfway down the dependency graph and add it as a dependency to your project so it will be installed under the top level <code>node_modules</code> and not a <code>node_modules</code> directory <code>n</code> levels deep. Make sure to install the correct version and test thoroughly.</p>\n<p>There are also a few Node modules out there which “flatten” your dependency graph. The downside to these modules is that if there is a conflict (package A depends on version 1.0.0 of package Z and package B depends on version 3.2.1 of package Z) then the latest version of the module (package Z) is used, which could be problematic. So, be careful.</p>\n<h4><a id=\"cant-npm-fix-this\" class=\"post-header-anchor\" href=\"#cant-npm-fix-this\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Can’t npm fix this?</h4>\n<p><s>You might see people reference Windows APIs (which support long paths) as a possible fix but it is <a href=\"https://github.com/joyent/node/issues/6960#issuecomment-46704998\" rel=\"noopener\">very unlikely</a> this will be fixed in npm. <code>[npm dedupe](https://docs.npmjs.com/cli/dedupe)</code> <em>should</em> help with this too but it's not reliable in my experience.</s></p>\n<p>This has been fixed as of <a href=\"https://github.com/npm/npm/releases/tag/v3.0.0\" rel=\"noopener\">npm 3.0.0</a>.</p>\n<blockquote>\n<p>Your dependencies will now be installed <em>maximally</em> flat. Insofar as is possible, all of your dependencies, and their dependencies, and THEIR dependencies will be installed in your project’s <code>node_modules</code> folder with no nesting. You'll only see modules nested underneath one another when two (or more) modules have conflicting dependencies.</p>\n</blockquote>\n<p>Excuse me…</p>\n<figure>\n          <a href=\"/images/blog-content/dealing-with-long-paths/dance.gif\"><img src=\"/images/blog-content/dealing-with-long-paths/dance.gif\" alt=\"\"/></a>\n          <figcaption><p>* Dances *</p>\n</figcaption>\n        </figure><h4><a id=\"manually-checking-for-exceedingly-long-paths\" class=\"post-header-anchor\" href=\"#manually-checking-for-exceedingly-long-paths\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Manually checking for exceedingly long paths</h4>\n<p>Up until now, we’ve had to routinely check for long paths using <a href=\"https://pathlengthchecker.codeplex.com/\" rel=\"noopener\">Path Length Checker</a> (on Windows) but a manual check is not good enough as stuff can still slip through the net.</p>\n<h4><a id=\"introducing-gulp-path-length\" class=\"post-header-anchor\" href=\"#introducing-gulp-path-length\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Introducing gulp-path-length</h4>\n<p>So, we’ve created a simple <a href=\"http://gulpjs.com\" rel=\"noopener\">Gulp</a> plugin help with this; <a href=\"https://github.com/Teamwork/gulp-path-length\" rel=\"noopener\">gulp-path-length</a>. You could use it like this in a Gulp task:</p>\n<pre><code class=\"language-javascript\"><span class=\"token keyword\">var</span> gulp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> pathLength <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-path-length'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'default'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  gulp<span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./example/path/to/directory/**'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>read<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">pathLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>If all is well, nothing will happen. If you have a path exceeding 256 characters, the Gulp task will stop and an error will reveal the offending path. This is really fast either way as Gulp doesn't need to read the contents of the files. The limit can be changed with a parameter; i.e. <code>.pipe(pathLength({ maxLength: 50 });</code>.</p>\n<p>This is fine if it's just for you locally, but there are bigger fish to fry.</p>\n<h3><a id=\"distributed-long-paths\" class=\"post-header-anchor\" href=\"#distributed-long-paths\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Distributed long paths</h3>\n<p>What if there are multiple developers working on your project? What if a developer is using Mac OS X or Linux? There could easily be false positives. It's one thing having issues locally or within a team, it's a whole other thing to have path length problems in production on end users' machines.</p>\n<p>We've run into this with <a href=\"https://www.teamwork.com/chat\" rel=\"noopener\">Teamwork Chat</a> for Windows as it's built on <a href=\"https://github.com/nwjs/nw.js\" rel=\"noopener\">NW.js</a> (formerly node-webkit) and can contain long paths (i.e. dependencies from npm). Depending on how long the current user's username was, the user might've seen something like this when they tried to launch Teamwork Chat:</p>\n<p>A dummy application. None of our app code is executed. This means no error reports and no way the app could even auto-update once a patch was released. As a maintainer of <a href=\"https://github.com/mllrsohn/node-webkit-builder\" rel=\"noopener\">node-webkit-builder</a>, I know we're not the only ones who have faced this problem.</p>\n<h3><a id=\"is-there-anything-we-can-do\" class=\"post-header-anchor\" href=\"#is-there-anything-we-can-do\" aria-hidden=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"><path d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"></path></svg></a>Is there anything we can do?</h3>\n<p>Once the code is shipped, it's too late. Luckily, we have a rough idea where the files will exist on end users machines thanks to our Windows installer. We've added a <code>rewrite</code> option to gulp-path-length for simulating paths to prevent this problem ever ocurring again;</p>\n<pre><code class=\"language-javascript\"><span class=\"token keyword\">var</span> gulp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> pathLength <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-path-length'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'default'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  gulp<span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./example/path/to/directory/**'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    read<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">pathLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    rewrite<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      match<span class=\"token punctuation\">:</span> <span class=\"token string\">'./example/path/to/directory/'</span><span class=\"token punctuation\">,</span>\n      replacement<span class=\"token punctuation\">:</span> <span class=\"token string\">'C:\\\\Users\\\\a-long-username-here\\\\AppData\\\\And\\\\So\\\\On'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>So, it doesn't matter where you are on your filesystem or which operating system you're using, it will test the length of files (which belong to the given <code>rewrite.match</code> directory) as if they're in a specific directory on Windows (i.e. <code>rewrite.replacement</code>). The outcome would be the same for any developer on the team.</p>\n<p>You could run this before you ship your code but we've added this to a compilation build step so we catch it as early as possible. If a Mac developer adds really long paths to the project (like an npm dependency which depends on a chain of <a href=\"https://lodash.com/\" rel=\"noopener\">lodash</a> modules), they'll see right away that this will break stuff for some Windows users. For good measure, we also run it in a continuous integration step.</p>\n<p>Are we missing anything here? Feel free to send us a pull-request or create an issue over at the gulp-path-length <a href=\"https://github.com/Teamwork/gulp-path-length\" rel=\"noopener\">GitHub repository</a>.</p>\n",
  "summary": "You might have been unfortunate enough to learn that Windows has a 256-character limit on file paths. You could’ve run into this problem locally or on end users’ machines. We’ve created a simple little module called gulp-path-length to…\n",
  "original": {
    "blogLink": "https://engineroom.teamwork.com",
    "blogName": "Teamwork's Engine Room",
    "url": "https://engineroom.teamwork.com/dealing-with-long-paths-fcf412649a01"
  },
  "photo": "/images/blog-content/dealing-with-long-paths/helping-hand.gif",
  "keywords": [
    "NW.js",
    "node-webkit",
    "npm",
    "distribution",
    "paths",
    "windows"
  ],
  "published_at": "2015-07-01T00:00:00.000Z",
  "updated_at": "2018-08-05T16:25:28.067Z",
  "year": 2015,
  "month": 7,
  "day": 2,
  "next": {
    "id": "resurrecting-clippy",
    "slug": "resurrecting-clippy",
    "collection": null,
    "keywords": [
      "clippy",
      "desktop",
      "app",
      "NW.js",
      "node-webkit",
      "javascript"
    ],
    "original": {
      "blogLink": "https://engineroom.teamwork.com",
      "blogName": "Teamwork's Engine Room",
      "url": "https://engineroom.teamwork.com/resurrecting-clippy-89843fcc9871"
    },
    "title": "Resurrecting Clippy",
    "summary": "Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat...\n",
    "photo": "/images/blog-content/resurrecting-clippy/osx.png",
    "published_at": "2016-03-08T00:00:00.000Z",
    "renderedSummary": "<p>Remember Clippy? First shipped with Windows 97, Clippy was a “smart” assistant for Microsoft Office. A selfless shape-shifting paperclip who would appear out of nowhere to help you in any way it could. And how did you treat...</p>\n"
  },
  "prev": {
    "id": "coffeescript-at-teamwork",
    "slug": "coffeescript-at-teamwork",
    "collection": null,
    "keywords": [
      "coffeescript",
      "teamwork"
    ],
    "original": {
      "blogLink": "https://engineroom.teamwork.com",
      "blogName": "Teamwork's Engine Room",
      "url": "https://engineroom.teamwork.com/coffeescript-at-teamwork-e596eed63590"
    },
    "title": "CoffeeScript at Teamwork",
    "summary": "The first project at Teamwork to use CoffeeScript was the Teamwork.com iPad app. Fast forward two years. We now have web, mobile and even desktop apps built with CoffeeScript. If you need a primer, there’s no better place…\n",
    "photo": "/images/blog-content/coffeescript-at-teamwork/biscotto-output.jpg",
    "published_at": "2014-09-26T00:00:00.000Z",
    "renderedSummary": "<p>The first project at Teamwork to use CoffeeScript was the <a href=\"http://Teamwork.com\" rel=\"noopener\">Teamwork.com</a> iPad app. Fast forward two years. We now have web, mobile and even desktop apps built with CoffeeScript. If you need a primer, there’s no better place…</p>\n"
  }
}