<!DOCTYPE html>
<html data-n-head-ssr data-n-head="">
  <head>
    <meta data-n-head="true" charset="utf-8"/><meta data-n-head="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-n-head="true" theme-color="theme-color" content="#ffffff"/><meta data-n-head="true" data-hid="description" name="description" content="The idea was to build a chat application of our own. A whole new standalone product to raise the bar for team communication and collaboration. From the beginning, Teamwork Chat was intended to tie our whole suite of…
"/><meta data-n-head="true" data-hid="keywords" name="keywords" content="teamwork, chat, node.js, javascript, node-webkit, NW.js"/><meta data-n-head="true" data-hid="twitter:card" name="twitter:card" content="summary"/><meta data-n-head="true" data-hid="twitter:title" name="twitter:title" content="A peek under the hood of Teamwork Chat"/><meta data-n-head="true" data-hid="twitter:description" name="twitter:description" content="The idea was to build a chat application of our own. A whole new standalone product to raise the bar for team communication and collaboration. From the beginning, Teamwork Chat was intended to tie our whole suite of…
"/><meta data-n-head="true" name="twitter:image" content="/images/blog-content/a-peek-under-the-hood-of-teamwork-chat/teamwork-chat.png"/><meta data-n-head="true" data-hid="twitter:url" name="twitter:url" content="/a-peek-under-the-hood-of-teamwork-chat"/><meta data-n-head="true" data-hid="og:type" name="og:type" content="article"/><meta data-n-head="true" data-hid="og:title" name="og:title" content="A peek under the hood of Teamwork Chat"/><meta data-n-head="true" data-hid="og:description" name="og:description" content="The idea was to build a chat application of our own. A whole new standalone product to raise the bar for team communication and collaboration. From the beginning, Teamwork Chat was intended to tie our whole suite of…
"/><meta data-n-head="true" data-hid="og:image" name="og:image" content="/images/blog-content/a-peek-under-the-hood-of-teamwork-chat/teamwork-chat.png"/><meta data-n-head="true" data-hid="og:url" name="og:url" content="/a-peek-under-the-hood-of-teamwork-chat"/><title data-n-head="true">A peek under the hood of Teamwork Chat</title><link data-n-head="true" rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="76x76"/><link data-n-head="true" rel="icon" type="image/x-icon" href="/favicon-32x32.png" sizes="32x32"/><link data-n-head="true" rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"/><link data-n-head="true" rel="mask-icon" href="/safari-pinned-tab.svg" color="#53687a"/><link data-n-head="true" rel="stylesheet" href="//unpkg.com/prismjs/themes/prism.css"/><link rel="preload" href="/_nuxt/manifest.abc31dc060e3ed19359c.js" as="script"><link rel="preload" href="/_nuxt/vendor.ce05078a33ab89125ee8.js" as="script"><link rel="preload" href="/_nuxt/app.7483cb8f66e5132744b6.js" as="script"><link rel="preload" href="/_nuxt/layouts/default.dcd755738ab4512ac2d6.js" as="script"><link rel="preload" href="/_nuxt/2.3b673da155016dda00fa.js" as="script"><link rel="prefetch" href="/_nuxt/pages/index.ee235221e1c612aa1171.js"><style data-vue-ssr-id="6dd13fd5:0">*{-webkit-box-sizing:border-box;box-sizing:border-box}body,html{margin:0;padding:0}ol,ul{list-style:none;padding-left:0;margin:0}a{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;text-decoration:none;color:inherit}body{font-family:Arial,sans-serif;line-height:1.55;letter-spacing:-.25px;-webkit-font-smoothing:antialiased}.wf-active body{font-family:Lato,Arial,sans-serif}body{background:#ececec;color:#333;padding-top:32px;padding-top:2rem}.wrapper{max-width:960px;max-width:60rem;margin:0 auto}.header{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:0 32px;padding:0 2rem;background:#ececec}@media (min-width:59rem){.header{-ms-flex-wrap:nowrap;flex-wrap:nowrap}}.site-title{margin:0;text-align:center;-webkit-transition:opacity .25s ease-in;transition:opacity .25s ease-in;min-width:100%;max-width:96px;max-width:6rem}@media (min-width:42rem){.site-title{min-width:0;-webkit-box-flex:1;-ms-flex:1;flex:1}}@media (min-width:59rem){.site-title{-webkit-box-flex:initial;-ms-flex:initial;flex:initial}}.site-title:hover{opacity:.9}.site-link{display:inline-block;background:url(/_nuxt/img/Logo.542e06c.png) 0 no-repeat;background-size:5.99rem;height:144px;height:9rem;width:96px;width:6rem;margin:0 auto;text-indent:-9999px}@media (-webkit-min-device-pixel-ratio:2),(min-device-pixel-ratio:2),(min-resolution:192dpi){.site-link{background-image:url(/_nuxt/img/Logo@2x.b121531.png)}}.site-happy-text-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;margin:0 auto;padding:0;width:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:20.8px;font-size:1.3rem}@media (min-width:42rem){.site-happy-text-wrapper{-webkit-box-flex:2;-ms-flex:2;flex:2;padding:0 0 0 2rem}}@media (min-width:59rem){.site-happy-text-wrapper{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:1.2rem}}@media (min-width:61rem){.site-happy-text-wrapper{font-size:1.3rem}}.site-happy-text{-webkit-box-flex:1;-ms-flex:1;flex:1;margin:0;text-align:center}@media (min-width:42rem){.site-happy-text{text-align:left}}.site-happy-text-headline{display:block}.site-happy-text-headline,.wf-active .site-happy-text-headline{font-size:30.4px;font-size:1.9rem;font-weight:700}@media (min-width:25rem){.site-happy-text-headline{font-size:2.3rem;line-height:1.7}.wf-active .site-happy-text-headline{line-height:1.5;font-size:2.5rem}}@media (min-width:59rem){.site-happy-text-headline{font-size:2.9rem}.wf-active .site-happy-text-headline{font-size:3.1rem}}@media (min-width:61rem){.site-happy-text-headline{font-size:2.92rem;line-height:1.7}.wf-active .site-happy-text-headline{line-height:1.5;font-size:3.2rem}}.site-happy-text-tagline{display:inline}@media (min-width:42rem){.site-happy-text-tagline{display:block}}.navigation-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;padding:32px 0 0;padding:2rem 0 0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}@media (min-width:59rem){.navigation-wrapper{max-width:23rem;padding:0 0 0 2rem}}.navigation{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;min-width:100%;width:100%}@media (min-width:59rem){.navigation{-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;min-width:0}}.navigation-item{-webkit-box-flex:1;-ms-flex:1 1 33%;flex:1 1 33%;min-width:33%;display:-webkit-box;display:-ms-flexbox;display:flex;position:relative;cursor:pointer;font-size:11.2px;font-size:.7rem;font-weight:700;text-shadow:0 1px 1px rgba(0,0,0,.2)}@media (min-width:25rem){.navigation-item{font-size:.75rem}}@media (min-width:45rem){.navigation-item{min-width:0;-webkit-box-flex:1;-ms-flex:1;flex:1}}@media (min-width:59rem){.navigation-item{-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;min-width:33%}}.writing-navigation-item{background:rgba(151,167,182,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.writing-navigation-item:hover{background:#889bab}.edit-navigation-item{background:hsla(210,7%,73%,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.edit-navigation-item:hover{background:#a8aeb4}.code-navigation-item{background:rgba(167,177,186,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.code-navigation-item:hover{background:#99a5af}.twitter-navigation-item{background:rgba(134,155,173,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.twitter-navigation-item:hover{background:#778ea3}.email-navigation-item{background:rgba(151,165,177,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.email-navigation-item:hover{background:#8898a6}.linkedin-navigation-item{background:hsla(208,9%,68%,.9);-webkit-transition:background-color .25s;transition:background-color .25s}.linkedin-navigation-item:hover{background:#99a2aa}.navigation-link{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px;padding:1rem;text-decoration:none;color:#f5f5f5;font-size:12.8px;font-size:.8rem;-webkit-transition:color .25s;transition:color .25s}@media (min-width:25rem){.navigation-link{padding:1.5rem}}.navigation-link:after{content:"";position:absolute;top:100%;left:0;bottom:0;right:0;height:0;width:100%;background:#000;opacity:.02;cursor:pointer;-webkit-transition:all .2s ease-out;transition:all .2s ease-out}.navigation-link:hover{color:#fff}.navigation-link:hover:after{top:50%;height:50%}.navigation-item-text{-webkit-box-flex:1;-ms-flex:1;flex:1}.posts{padding:32px;padding:2rem}.post-wrapper{padding-bottom:32px;padding-bottom:2rem}.post-wrapper:last-child{padding-bottom:0}.post{padding:32px;padding:2rem;margin:32px;margin:2rem;background:#fff;max-width:960px;max-width:60rem}.posts .post{margin:0 auto}.post>:first-child{margin-top:0}.post-content{font-size:17.6px;font-size:1.1rem;line-height:1.55}.post-content>*{margin:24px 0 0;margin:1.5rem 0 0}.post-content :not(figure)>a{color:#3f729e;padding-bottom:.8px;padding-bottom:.05rem;background-image:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.2)),to(rgba(0,0,0,.2)));background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2));background-repeat:no-repeat;background-size:100% 1.5px;background-position:center bottom 10%;background-origin:padding-box;text-shadow:3px 0 #fff,2px 0 #fff,1px 0 #fff,-1px 0 #fff,-2px 0 #fff,-3px 0 #fff;-webkit-transition:color .25s;transition:color .25s}.post-content :not(figure)>a:hover{color:#223d55}.post-content blockquote{position:relative;font-size:20.8px;font-size:1.3rem;font-size:25.12px;font-size:1.57rem;font-style:italic;font-weight:100;padding-left:32px;padding-left:2rem;line-height:1.48;margin-top:32px;margin-top:2rem}.post-content blockquote:before{content:"\201C";position:absolute;top:-24px;top:-1.5rem;left:-8px;left:-.5rem;height:48px;height:3rem;width:25px;color:#f5f5f5;font-size:96px;font-size:6rem;font-style:normal;line-height:1}.post-content blockquote footer{margin-top:16px;margin-top:1rem;font-size:14.4px;font-size:.9rem;text-align:right}.post-content blockquote cite{display:inline-block;margin-left:8px;margin-left:.5rem}.post-content figure{text-align:center}.post-content figcaption{color:#666;font-size:14.4px;font-size:.9rem;font-style:italic}.post-content img{display:block;max-width:100%;height:auto;margin:0 auto;min-height:50px;min-width:150px;position:relative;color:#b6b6b6;font-size:14.4px;font-size:.9rem;text-align:center}.post-content img:before{content:"Image failed to load :/";display:block;font-size:15.2px;font-size:.95rem}.post-content code,.post-content pre{font-family:Consolas,Monaco,Andale Mono,monospace;text-shadow:0 1px #fff;white-space:pre;word-spacing:normal;word-break:normal;-webkit-font-feature-settings:none;font-feature-settings:none;-webkit-font-variant-ligatures:none;font-variant-ligatures:none;word-wrap:normal;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}.post-content :not(h3):not(h4):not(h5):not(h6)>code,.post-content pre{font-size:13.6px;font-size:.85rem}.post-content :not(pre)>code,.post-content pre{background:#f5f5f5}.post-content pre{padding:16px;padding:1rem;overflow:auto;color:#000}.post-content :not(pre)>code{display:inline-block;padding:0 4.36px;padding:0 .2725rem;white-space:normal}.post-content a code{background:transparent none repeat 0 0/auto auto padding-box border-box scroll;background:initial;font-size:15.68px;font-size:.98rem;padding:0;padding:initial}.post-content p:first-child{margin-top:0}.post-content h3{font-size:26px;font-size:1.625rem}.post-content h4{font-size:22.224px;font-size:1.389rem}.post-content h5{font-size:18.448px;font-size:1.153rem}.post-content h6{font-size:14.896px;font-size:.931rem}.post-content .post-header-anchor{position:absolute;left:-32px;left:-2rem;top:20px;width:32px;width:2rem;-webkit-transform:translateY(-50%);transform:translateY(-50%);background:none;text-align:center;line-height:1;text-shadow:none;-webkit-transition:opacity .25s ease-in-out;transition:opacity .25s ease-in-out}.post-content .post-header-anchor:focus{outline:none}.post-content .post-header-anchor:hover svg{opacity:1}.post-content .post-header-anchor:after{content:" copied";position:absolute;bottom:-14px;left:0;right:0;font-size:.6em;color:gray;opacity:0;visibility:none;-webkit-transition:opacity 2s;transition:opacity 2s}.post-content .post-header-anchor svg{opacity:.2}.post-content h4 .post-header-anchor{top:18px}.post-content h5 .post-header-anchor{top:16px}.post-content h6 .post-header-anchor{top:14px}.post-content .post-header-anchor--copied:after{opacity:1}.post-content p:last-of-type{margin-bottom:0}.post-content h3,.post-content h4,.post-content h5,.post-content h6{position:relative}.post-content h3+p,.post-content h4+p,.post-content h5+p,.post-content h6+p{margin-top:8px;margin-top:.5rem}.post-content p+h3,.post-content p+h4,.post-content p+h5,.post-content p+h6{margin-top:32px;margin-top:2rem}.post-content ol,.post-content ul{padding-left:1.25em;list-style:disc outside none;list-style:initial}.post-content li{margin-bottom:8px;margin-bottom:.5rem}.post-summary .post-content,.post-summary .post-content>*{display:inline}.post-content table{border-spacing:0;border-collapse:collapse}.post-content td,.post-content th{padding:0;padding:6px 13px;border:1px solid #dfe2e5}.post-content th{font-weight:600;text-align:left}.post-title-wrapper{margin:0}.post-title{line-height:1.4;font-size:22.4px;font-size:1.4rem;font-weight:700}.wf-active .post-title{font-size:24px;font-size:1.5rem;line-height:1.2}@media (min-width:30rem){.post-title{line-height:1.6;font-size:1.85rem}.wf-active .post-title{line-height:1.5;font-size:2rem}}.post-title-label{display:inline-block;position:relative;bottom:.3em;padding:.2em .4em;margin-left:.3em;font-size:.5em;background:#e3e3e3;color:#9e9e9e;border-radius:5%;font-weight:400;-webkit-transition:opacity .25s ease-in;transition:opacity .25s ease-in}.post-title:hover .post-title-label{opacity:.9}.post-title-label-parenthesis{display:none}.post-meta{font-size:14.4px;font-size:.9rem;margin:16px 0;margin:1rem 0;color:#a2a2a2}@media (-webkit-min-device-pixel-ratio:2),(min-device-pixel-ratio:2),(min-resolution:192dpi){.post-meta{color:#000;font-weight:300}}.post-blog-date{display:block;margin-top:8px;margin-top:.5rem}@media (min-width:30rem){.post-blog-date{display:inline;margin-top:0}.post-blog-date+.post-blog-title:before{display:inline-block;content:" \2014   ";margin:0 .25rem 0 .5rem}}.post-blog-link{font-weight:400;font-style:italic}.footer-link,.post-blog-link,.post-read-more-link,.post-title,.site-happy-text-headline-link,.site-happy-text-tagline-link{-webkit-transition:color .25s;transition:color .25s}.footer-link:hover,.post-blog-link:hover,.post-read-more-link:hover,.post-title:hover,.site-happy-text-headline-link:hover,.site-happy-text-tagline-link:hover{color:#869bad}.footer-link,.post-read-more-link,.post-title,.site-happy-text-tagline-link{color:#53687a}.post-read-more-link{display:inline-block;font-weight:700;margin:0}.post-comments{margin:32px;margin:2rem;padding:32px;padding:2rem;background:#fff}.footer{text-align:center;font-size:12.8px;font-size:.8rem;margin-bottom:32px;margin-bottom:2rem}.footer-text{margin:0}.footer-link{font-weight:700}.copyright{display:block;color:gray}@media (-webkit-min-device-pixel-ratio:2),(min-device-pixel-ratio:2),(min-resolution:192dpi){.copyright{font-weight:100}}.fix-bug-ignore{color:red}.posts{position:relative}.post-wrapper{-webkit-transition:padding .5s ease-in-out,-webkit-transform .3s ease-in-out;transition:padding .5s ease-in-out,-webkit-transform .3s ease-in-out;transition:padding .5s ease-in-out,transform .3s ease-in-out;transition:padding .5s ease-in-out,transform .3s ease-in-out,-webkit-transform .3s ease-in-out}.post{-webkit-transition:opacity .1s ease-in-out,-webkit-transform .1s ease-in-out;transition:opacity .1s ease-in-out,-webkit-transform .1s ease-in-out;transition:opacity .1s ease-in-out,transform .1s ease-in-out;transition:opacity .1s ease-in-out,transform .1s ease-in-out,-webkit-transform .1s ease-in-out}.posts--entering-post .post-wrapper:not(.post-wrapper--entering-from-posts) .post{opacity:.2;-webkit-transform:scale(.8);transform:scale(.8)}.posts--entering-post .post-wrapper--entering-from-posts{left:32px;left:2rem;right:32px;right:2rem}.post-skeleton{line-height:1.55;position:relative;opacity:0;max-height:0;overflow:hidden}.post-skeleton.post-skeleton--visible,.post-wrapper--entering-from-posts .post-skeleton{opacity:1;margin-top:32px;margin-top:2rem;max-height:none}.post-skeleton:after{content:" ";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;opacity:.2;-webkit-animation:1s skeleton infinite ease-in-out;animation:1s skeleton infinite ease-in-out}.post-skeleton-word{height:17.6px;height:1.1rem;background:#f7f7f7;width:46px;display:inline-block;margin:4px 6px 0 0}.post-skeleton-word:nth-child(2n){width:36px}.post-skeleton-word:nth-child(3n){width:76px}.post-skeleton+.post-skeleton .post-skeleton-word:nth-child(3n){width:71px}.post-skeleton-word:nth-child(5n){width:96px}.post-skeleton-word:nth-child(6n){width:63px}.post-skeleton-word:nth-child(7n){width:26px}@-webkit-keyframes skeleton{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}98%{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}99%{-webkit-transform:translate3d(100%,100%,0);transform:translate3d(100%,100%,0)}to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@keyframes skeleton{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}98%{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}99%{-webkit-transform:translate3d(100%,100%,0);transform:translate3d(100%,100%,0)}to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}</style><style data-vue-ssr-id="772bbed7:0">.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;-webkit-transition:width .2s,opacity .4s;transition:width .2s,opacity .4s;opacity:1;background-color:#efc14e;z-index:999999}</style>
    <script src="https://unpkg.com/scrollto-with-animation/dist/scrollto-with-animation.min.js"></script>
  </head>
  <body data-n-head="">
    <div data-server-rendered="true" id="__nuxt"><div class="nuxt-progress" style="width:0%;height:2px;background-color:#869bad;opacity:0;"></div><div id="__layout"><div class="wrapper"><main class="content"><header class="header"><h1 class="site-title"><a href="/" class="site-link nuxt-link-active">Adam Lynch</a></h1> <div class="site-happy-text-wrapper"><p class="site-happy-text"><span class="site-happy-text-headline">
                I'm <a href="/" class="site-happy-text-headline-link nuxt-link-active">Adam Lynch</a>.
            </span> <span class="site-happy-text-tagline">
                I like to
                <a href="https://github.com/adam-lynch" class="site-happy-text-tagline-link">code</a>,
                <a href="/" class="site-happy-text-tagline-link nuxt-link-active">write</a>, and dabble in design.
            </span> <span class="site-happy-text-tagline">
                I lead <a href="https://www.teamwork.com" class="site-happy-text-tagline-link">Teamwork.com</a>'s next product.
            </span></p></div> <nav role="navigation" class="navigation-wrapper"><ul class="navigation"><li class="navigation-item writing-navigation-item"><a href="/" class="navigation-link"><span class="navigation-item-text">Writing</span></a></li> <li class="navigation-item code-navigation-item"><a href="https://github.com/adam-lynch" rel="noopener" class="navigation-link"><span class="navigation-item-text">Code</span></a></li> <li class="navigation-item edit-navigation-item"><a href="https://github.com/adam-lynch/adam-lynch.github.io" rel="noopener" class="navigation-link"><span class="navigation-item-text">Edit page</span></a></li> <li class="navigation-item twitter-navigation-item"><a href="https://twitter.com/lynchy010/" rel="noopener" class="navigation-link"><span class="navigation-item-text">Twitter</span></a></li> <li class="navigation-item email-navigation-item"><a href="mailto:contact@adamlynch.com" rel="noopener" class="navigation-link"><span class="navigation-item-text">Email</span></a></li> <li class="navigation-item linkedin-navigation-item"><a href="https://www.linkedin.com/in/adamlynch010/" rel="noopener" class="navigation-link"><span class="navigation-item-text">LinkedIn</span></a></li></ul></nav></header> <div><article class="post"><h2 class="post-title-wrapper"><a href="/a-peek-under-the-hood-of-teamwork-chat" class="post-title nuxt-link-exact-active nuxt-link-active">A peek under the hood of Teamwork Chat</a></h2> <div class="post-meta"><time class="post-blog-date">April 28th, 2015</time> <span class="post-blog-title">
            Originally posted on <a href="https://engineroom.teamwork.com/dealing-with-long-paths-fcf412649a01" class="post-blog-link">Teamwork's Engine Room</a></span></div> <div class="post-content">
<p>The idea was to build a chat application of our own. A whole new standalone product to raise the bar for team communication and collaboration. From the beginning, <a href="https://www.teamwork.com/chat" rel="noopener">Teamwork Chat</a> was intended to tie our whole suite of products together. Being able to have a quick conversation about a project, seeing support tickets automatically as they came in, and creating a task, all without leaving the app.</p>
<p>The first prototype was put together by a small team in Cork roughly a year ago. While attending O’Reilly’s <a href="http://fluentconf.com/" rel="noopener">Fluent Conference</a> in San Francisco, this was fleshed out a bit more. Thousands and thousands of hours, way more lines of code, and even a complete redesign later; <a href="https://blog.teamwork.com/announcing-teamwork-chat/" rel="noopener">Teamwork Chat was released to the world</a>.</p>
<figure>
          <a href="/images/blog-content/a-peek-under-the-hood-of-teamwork-chat/teamwork-chat.png"><img src="/images/blog-content/a-peek-under-the-hood-of-teamwork-chat/teamwork-chat.png" alt=""/></a>
          <figcaption><p>The Teamwork Chat logo</p>
</figcaption>
        </figure><p>From back to front, our stack begins with twenty MySQL shards. We have four Node.js <code>chat-server</code>s and an nginx load balancer per Amazon EC2 instance. The <code>chat-server</code>s communicate via Redis (pub/sub). In front of these EC2 instances we have an Elastic Load Balancer. We also have <code>chat-notify-server</code>s which listen for events over a Redis channel and handle the sending of email and push notifications. <a href="http://adamlynch.com/coffeescript-at-teamwork/" rel="noopener">Everything is written in CoffeeScript</a> and server updates are rolled out using a continuous deployment service once we push to <code>master</code>.</p>
<h4><a id="crashy" class="post-header-anchor" href="#crashy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>Crashy</h4>
<p>We’ve been overly cautious. Load is quite thinly spread and everything is fault-tolerant. Our Node servers restart themselves on failure and connected clients migrate to other chat-servers. Errors and events like these are monitored using <a href="https://getsentry.com/" rel="noopener">Sentry</a>. As some last-minute pre-release jitters were setting in, we added the following code to the chat-server to test the fault-tolerance again just to be safe:</p>
<p>If anyone sent a message containing exactly <code>crashy</code>, the chat-server they were connected to would die, anyone connected would be routed to a different chat-server and the server would restart. This bit of code was still there in production up to a week <em>after</em> we released. Yep. We're human after all.</p>
<pre><code class="language-coffeescript"><span class="token keyword">if</span> contents<span class="token punctuation">.</span>body <span class="token keyword">is</span> <span class="token string">'crashy'</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span> <span class="token string">'crashy crashy'</span>
</code></pre>
<figure>
          <a href="/images/blog-content/a-peek-under-the-hood-of-teamwork-chat/eek.gif"><img src="/images/blog-content/a-peek-under-the-hood-of-teamwork-chat/eek.gif" alt=""/></a>
          <figcaption><p>Eek!</p>
</figcaption>
        </figure><h4><a id="the-clients" class="post-header-anchor" href="#the-clients" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>The client(s)</h4>
<p>We use Node on the server and the client. If that sounds crazy, have a look at <a href="https://github.com/nwjs/nw.js" rel="noopener">NW.js</a> (formerly known as node-webkit). NW.js combines chromium and <a href="http://readwrite.com/2015/02/27/node-js-io-js-reconciliation-near" rel="noopener">io.js</a>. This enables you to quickly create a desktop application using HTML, CSS and JavaScript (just like you would be able to in Chrome) with access to the all of the power of io.js. As Web developers, this is a major win for us.</p>
<p>As NW.js (0.12.0) is basically Chrome (41), we can just put our desktop app on the Web and it will basically just work. That’s a simplification but you get the picture. Even further, we should be able to create Android and iOS apps by sticking our app in a WebView. We’re attempting to build a consistent experience across all platforms from the one codebase. It’s not as easy as I make out though; expect more posts to follow up on this.</p>
<p>For the client, we use Knockout.js (as does every <a href="http://Teamwork.com" rel="noopener">Teamwork.com</a> product) extensively, Browserify, jQuery, and many many more modules and libraries. Our clients and servers communicate back and forth via pure WebSockets. We’ve built a custom in-app auto-updater using <a href="https://github.com/edjafarov/node-webkit-updater" rel="noopener"><code>node-webkit-updater</code></a>.</p>
<p>Teamwork Chat is a mobile-first responsive app. Our stylesheets are written in LESS and are littered with mixins, variables, and <code>em</code> values. We tend to base a lot of our variables on common / base variables using color functions, mathematic operations, etc... This makes it very easy to tweak the interface significantly by changing a variable or two. There aren't any prefixes to be found (thanks to <a href="https://github.com/postcss/autoprefixer" rel="noopener"><code>autoprefixer</code></a>), flexbox is used for layout where it really saves us hassle, and we also use SVGs exclusively. Teamwork Chat wasn't always responsive though. As I mentioned earlier, we completely changed the direction of Teamwork Chat at one point. While doing this, we also re-wrote the markup and styles, but more about that in a future post.</p>
<p>Our build system of choice is <a href="http://www.adamlynch.com/rome-wasnt-built-with-gulp/" rel="noopener">gulp</a>. Teamwork Chat uses gulp heavily, including for building <code>.app</code>s and <code>.exe</code>s, creating installers, signing executables, as well as all of typical stuff like compilation.</p>
<p>We’ve contributed to a lot of open-source projects we’ve built Teamwork Chat on, including <a href="https://github.com/mllrsohn/node-webkit-builder" rel="noopener"><code>node-webkit-builder</code></a> and <code>node-webkit-updater</code>, which I help maintain. We have open-sourced some of our own modules and plan to release even more. Watch this space.</p>
<h4><a id="one-language-one-platform" class="post-header-anchor" href="#one-language-one-platform" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>One language, one platform</h4>
<p><img src="/images/blog-content/a-peek-under-the-hood-of-teamwork-chat/javascript.png" alt="The Java logo photoshopped to be a JavaScript logo"></p>
<p>Switching between writing client and server-side code is a breeze; everything is written in CoffeeScript on Node.js. This speeds up development and drastically reduces the amount of time it takes new developers to get up to speed.</p>
<p>Setting up an npm registry with <a href="https://www.npmjs.com/package/sinopia" rel="noopener"><code>sinopia</code></a> allowed us to create private npm modules which can be used on both the client and server. This allowed us to break up our application into easily testable chunks for consumption by the client, chat-server, and the chat-notify server. Small tested modules which do one thing well and follow <a href="http://semver.org" rel="noopener">semantic versioning</a>. That gives us a lot of confidence and ensures consistency across client and server.</p>
</div></article> <aside class="post-comments"><div id="disqus_thread"></div> <div aria-hidden="true" class="post-skeleton post-skeleton--visible"><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span><span class="post-skeleton-word"></span></div></aside></div> <footer class="footer"><p class="footer-text"><a href="https://github.com/adam-lynch/adam-lynch.github.io" class="footer-link">This site is open source</a> <span class="copyright">© 2018 Adam Lynch</span></p></footer></main></div></div></div><script type="text/javascript">window.__NUXT__={"layout":"default","data":[{"article":{"id":"a-peek-under-the-hood-of-teamwork-chat","slug":"a-peek-under-the-hood-of-teamwork-chat","highlightedLanguages":["coffeescript"],"source":"---\ndate: 2015-04-28\nsummary: The idea was to build a chat application of our own. A whole new standalone product to raise the bar for team communication and collaboration. From the beginning, Teamwork Chat was intended to tie our whole suite of…\noriginal:\n  blogLink: https:\u002F\u002Fengineroom.teamwork.com\n  blogName: Teamwork's Engine Room\n  url: https:\u002F\u002Fengineroom.teamwork.com\u002Fdealing-with-long-paths-fcf412649a01\ntags:\n  - teamwork\n  - chat\n  - node.js\n  - javascript\n  - node-webkit\n  - NW.js\n---\n\n## A peek under the hood of Teamwork Chat\n\nThe idea was to build a chat application of our own. A whole new standalone product to raise the bar for team communication and collaboration. From the beginning, [Teamwork Chat](https:\u002F\u002Fwww.teamwork.com\u002Fchat) was intended to tie our whole suite of products together. Being able to have a quick conversation about a project, seeing support tickets automatically as they came in, and creating a task, all without leaving the app.\n\nThe first prototype was put together by a small team in Cork roughly a year ago. While attending O’Reilly’s [Fluent Conference](http:\u002F\u002Ffluentconf.com\u002F) in San Francisco, this was fleshed out a bit more. Thousands and thousands of hours, way more lines of code, and even a complete redesign later; [Teamwork Chat was released to the world](https:\u002F\u002Fblog.teamwork.com\u002Fannouncing-teamwork-chat\u002F).\n\n\n:::figure a-peek-under-the-hood-of-teamwork-chat\u002Fteamwork-chat.png The Teamwork Chat logo\n:::\n\nFrom back to front, our stack begins with twenty MySQL shards. We have four Node.js `chat-server`s and an nginx load balancer per Amazon EC2 instance. The `chat-server`s communicate via Redis (pub\u002Fsub). In front of these EC2 instances we have an Elastic Load Balancer. We also have `chat-notify-server`s which listen for events over a Redis channel and handle the sending of email and push notifications. [Everything is written in CoffeeScript](http:\u002F\u002Fadamlynch.com\u002Fcoffeescript-at-teamwork\u002F) and server updates are rolled out using a continuous deployment service once we push to `master`.\n\n#### Crashy\n\nWe’ve been overly cautious. Load is quite thinly spread and everything is fault-tolerant. Our Node servers restart themselves on failure and connected clients migrate to other chat-servers. Errors and events like these are monitored using [Sentry](https:\u002F\u002Fgetsentry.com\u002F). As some last-minute pre-release jitters were setting in, we added the following code to the chat-server to test the fault-tolerance again just to be safe:\n\nIf anyone sent a message containing exactly `crashy`, the chat-server they were connected to would die, anyone connected would be routed to a different chat-server and the server would restart. This bit of code was still there in production up to a week _after_ we released. Yep. We're human after all.\n\n```coffeescript\nif contents.body is 'crashy'\n  throw new Error 'crashy crashy'\n```\n\n:::figure a-peek-under-the-hood-of-teamwork-chat\u002Feek.gif Eek!\n:::\n\n#### The client(s)\n\nWe use Node on the server and the client. If that sounds crazy, have a look at [NW.js](https:\u002F\u002Fgithub.com\u002Fnwjs\u002Fnw.js) (formerly known as node-webkit). NW.js combines chromium and [io.js](http:\u002F\u002Freadwrite.com\u002F2015\u002F02\u002F27\u002Fnode-js-io-js-reconciliation-near). This enables you to quickly create a desktop application using HTML, CSS and JavaScript (just like you would be able to in Chrome) with access to the all of the power of io.js. As Web developers, this is a major win for us.\n\nAs NW.js (0.12.0) is basically Chrome (41), we can just put our desktop app on the Web and it will basically just work. That’s a simplification but you get the picture. Even further, we should be able to create Android and iOS apps by sticking our app in a WebView. We’re attempting to build a consistent experience across all platforms from the one codebase. It’s not as easy as I make out though; expect more posts to follow up on this.\n\nFor the client, we use Knockout.js (as does every Teamwork.com product) extensively, Browserify, jQuery, and many many more modules and libraries. Our clients and servers communicate back and forth via pure WebSockets. We’ve built a custom in-app auto-updater using [`node-webkit-updater`](https:\u002F\u002Fgithub.com\u002Fedjafarov\u002Fnode-webkit-updater).\n\nTeamwork Chat is a mobile-first responsive app. Our stylesheets are written in LESS and are littered with mixins, variables, and `em` values. We tend to base a lot of our variables on common \u002F base variables using color functions, mathematic operations, etc... This makes it very easy to tweak the interface significantly by changing a variable or two. There aren't any prefixes to be found (thanks to [`autoprefixer`](https:\u002F\u002Fgithub.com\u002Fpostcss\u002Fautoprefixer)), flexbox is used for layout where it really saves us hassle, and we also use SVGs exclusively. Teamwork Chat wasn't always responsive though. As I mentioned earlier, we completely changed the direction of Teamwork Chat at one point. While doing this, we also re-wrote the markup and styles, but more about that in a future post.\n\nOur build system of choice is [gulp](http:\u002F\u002Fwww.adamlynch.com\u002Frome-wasnt-built-with-gulp\u002F). Teamwork Chat uses gulp heavily, including for building `.app`s and `.exe`s, creating installers, signing executables, as well as all of typical stuff like compilation.\n\nWe’ve contributed to a lot of open-source projects we’ve built Teamwork Chat on, including [`node-webkit-builder`](https:\u002F\u002Fgithub.com\u002Fmllrsohn\u002Fnode-webkit-builder) and `node-webkit-updater`, which I help maintain. We have open-sourced some of our own modules and plan to release even more. Watch this space.\n\n#### One language, one platform\n\n![The Java logo photoshopped to be a JavaScript logo](\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Fjavascript.png)\n\nSwitching between writing client and server-side code is a breeze; everything is written in CoffeeScript on Node.js. This speeds up development and drastically reduces the amount of time it takes new developers to get up to speed.\n\nSetting up an npm registry with [`sinopia`](https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Fsinopia) allowed us to create private npm modules which can be used on both the client and server. This allowed us to break up our application into easily testable chunks for consumption by the client, chat-server, and the chat-notify server. Small tested modules which do one thing well and follow [semantic versioning](http:\u002F\u002Fsemver.org). That gives us a lot of confidence and ensures consistency across client and server.\n","unfilteredRenderedBody":"\u003Ch2\u003E\u003Ca id=\"a-peek-under-the-hood-of-teamwork-chat\" class=\"post-header-anchor\" href=\"#a-peek-under-the-hood-of-teamwork-chat\" aria-hidden=\"true\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"\u003E\u003Cpath d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fsvg\u003E\u003C\u002Fa\u003EA peek under the hood of Teamwork Chat\u003C\u002Fh2\u003E\n\u003Cp\u003EThe idea was to build a chat application of our own. A whole new standalone product to raise the bar for team communication and collaboration. From the beginning, \u003Ca href=\"https:\u002F\u002Fwww.teamwork.com\u002Fchat\" rel=\"noopener\"\u003ETeamwork Chat\u003C\u002Fa\u003E was intended to tie our whole suite of products together. Being able to have a quick conversation about a project, seeing support tickets automatically as they came in, and creating a task, all without leaving the app.\u003C\u002Fp\u003E\n\u003Cp\u003EThe first prototype was put together by a small team in Cork roughly a year ago. While attending O’Reilly’s \u003Ca href=\"http:\u002F\u002Ffluentconf.com\u002F\" rel=\"noopener\"\u003EFluent Conference\u003C\u002Fa\u003E in San Francisco, this was fleshed out a bit more. Thousands and thousands of hours, way more lines of code, and even a complete redesign later; \u003Ca href=\"https:\u002F\u002Fblog.teamwork.com\u002Fannouncing-teamwork-chat\u002F\" rel=\"noopener\"\u003ETeamwork Chat was released to the world\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Cfigure\u003E\n          \u003Ca href=\"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Fteamwork-chat.png\"\u003E\u003Cimg src=\"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Fteamwork-chat.png\" alt=\"\"\u002F\u003E\u003C\u002Fa\u003E\n          \u003Cfigcaption\u003E\u003Cp\u003EThe Teamwork Chat logo\u003C\u002Fp\u003E\n\u003C\u002Ffigcaption\u003E\n        \u003C\u002Ffigure\u003E\u003Cp\u003EFrom back to front, our stack begins with twenty MySQL shards. We have four Node.js \u003Ccode\u003Echat-server\u003C\u002Fcode\u003Es and an nginx load balancer per Amazon EC2 instance. The \u003Ccode\u003Echat-server\u003C\u002Fcode\u003Es communicate via Redis (pub\u002Fsub). In front of these EC2 instances we have an Elastic Load Balancer. We also have \u003Ccode\u003Echat-notify-server\u003C\u002Fcode\u003Es which listen for events over a Redis channel and handle the sending of email and push notifications. \u003Ca href=\"http:\u002F\u002Fadamlynch.com\u002Fcoffeescript-at-teamwork\u002F\" rel=\"noopener\"\u003EEverything is written in CoffeeScript\u003C\u002Fa\u003E and server updates are rolled out using a continuous deployment service once we push to \u003Ccode\u003Emaster\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch4\u003E\u003Ca id=\"crashy\" class=\"post-header-anchor\" href=\"#crashy\" aria-hidden=\"true\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"\u003E\u003Cpath d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fsvg\u003E\u003C\u002Fa\u003ECrashy\u003C\u002Fh4\u003E\n\u003Cp\u003EWe’ve been overly cautious. Load is quite thinly spread and everything is fault-tolerant. Our Node servers restart themselves on failure and connected clients migrate to other chat-servers. Errors and events like these are monitored using \u003Ca href=\"https:\u002F\u002Fgetsentry.com\u002F\" rel=\"noopener\"\u003ESentry\u003C\u002Fa\u003E. As some last-minute pre-release jitters were setting in, we added the following code to the chat-server to test the fault-tolerance again just to be safe:\u003C\u002Fp\u003E\n\u003Cp\u003EIf anyone sent a message containing exactly \u003Ccode\u003Ecrashy\u003C\u002Fcode\u003E, the chat-server they were connected to would die, anyone connected would be routed to a different chat-server and the server would restart. This bit of code was still there in production up to a week \u003Cem\u003Eafter\u003C\u002Fem\u003E we released. Yep. We're human after all.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-coffeescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E contents\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ebody \u003Cspan class=\"token keyword\"\u003Eis\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'crashy'\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ethrow\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EError\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'crashy crashy'\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cfigure\u003E\n          \u003Ca href=\"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Feek.gif\"\u003E\u003Cimg src=\"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Feek.gif\" alt=\"\"\u002F\u003E\u003C\u002Fa\u003E\n          \u003Cfigcaption\u003E\u003Cp\u003EEek!\u003C\u002Fp\u003E\n\u003C\u002Ffigcaption\u003E\n        \u003C\u002Ffigure\u003E\u003Ch4\u003E\u003Ca id=\"the-clients\" class=\"post-header-anchor\" href=\"#the-clients\" aria-hidden=\"true\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"\u003E\u003Cpath d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fsvg\u003E\u003C\u002Fa\u003EThe client(s)\u003C\u002Fh4\u003E\n\u003Cp\u003EWe use Node on the server and the client. If that sounds crazy, have a look at \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fnwjs\u002Fnw.js\" rel=\"noopener\"\u003ENW.js\u003C\u002Fa\u003E (formerly known as node-webkit). NW.js combines chromium and \u003Ca href=\"http:\u002F\u002Freadwrite.com\u002F2015\u002F02\u002F27\u002Fnode-js-io-js-reconciliation-near\" rel=\"noopener\"\u003Eio.js\u003C\u002Fa\u003E. This enables you to quickly create a desktop application using HTML, CSS and JavaScript (just like you would be able to in Chrome) with access to the all of the power of io.js. As Web developers, this is a major win for us.\u003C\u002Fp\u003E\n\u003Cp\u003EAs NW.js (0.12.0) is basically Chrome (41), we can just put our desktop app on the Web and it will basically just work. That’s a simplification but you get the picture. Even further, we should be able to create Android and iOS apps by sticking our app in a WebView. We’re attempting to build a consistent experience across all platforms from the one codebase. It’s not as easy as I make out though; expect more posts to follow up on this.\u003C\u002Fp\u003E\n\u003Cp\u003EFor the client, we use Knockout.js (as does every \u003Ca href=\"http:\u002F\u002FTeamwork.com\" rel=\"noopener\"\u003ETeamwork.com\u003C\u002Fa\u003E product) extensively, Browserify, jQuery, and many many more modules and libraries. Our clients and servers communicate back and forth via pure WebSockets. We’ve built a custom in-app auto-updater using \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fedjafarov\u002Fnode-webkit-updater\" rel=\"noopener\"\u003E\u003Ccode\u003Enode-webkit-updater\u003C\u002Fcode\u003E\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003ETeamwork Chat is a mobile-first responsive app. Our stylesheets are written in LESS and are littered with mixins, variables, and \u003Ccode\u003Eem\u003C\u002Fcode\u003E values. We tend to base a lot of our variables on common \u002F base variables using color functions, mathematic operations, etc... This makes it very easy to tweak the interface significantly by changing a variable or two. There aren't any prefixes to be found (thanks to \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fpostcss\u002Fautoprefixer\" rel=\"noopener\"\u003E\u003Ccode\u003Eautoprefixer\u003C\u002Fcode\u003E\u003C\u002Fa\u003E), flexbox is used for layout where it really saves us hassle, and we also use SVGs exclusively. Teamwork Chat wasn't always responsive though. As I mentioned earlier, we completely changed the direction of Teamwork Chat at one point. While doing this, we also re-wrote the markup and styles, but more about that in a future post.\u003C\u002Fp\u003E\n\u003Cp\u003EOur build system of choice is \u003Ca href=\"http:\u002F\u002Fwww.adamlynch.com\u002Frome-wasnt-built-with-gulp\u002F\" rel=\"noopener\"\u003Egulp\u003C\u002Fa\u003E. Teamwork Chat uses gulp heavily, including for building \u003Ccode\u003E.app\u003C\u002Fcode\u003Es and \u003Ccode\u003E.exe\u003C\u002Fcode\u003Es, creating installers, signing executables, as well as all of typical stuff like compilation.\u003C\u002Fp\u003E\n\u003Cp\u003EWe’ve contributed to a lot of open-source projects we’ve built Teamwork Chat on, including \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmllrsohn\u002Fnode-webkit-builder\" rel=\"noopener\"\u003E\u003Ccode\u003Enode-webkit-builder\u003C\u002Fcode\u003E\u003C\u002Fa\u003E and \u003Ccode\u003Enode-webkit-updater\u003C\u002Fcode\u003E, which I help maintain. We have open-sourced some of our own modules and plan to release even more. Watch this space.\u003C\u002Fp\u003E\n\u003Ch4\u003E\u003Ca id=\"one-language-one-platform\" class=\"post-header-anchor\" href=\"#one-language-one-platform\" aria-hidden=\"true\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"\u003E\u003Cpath d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fsvg\u003E\u003C\u002Fa\u003EOne language, one platform\u003C\u002Fh4\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Fjavascript.png\" alt=\"The Java logo photoshopped to be a JavaScript logo\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ESwitching between writing client and server-side code is a breeze; everything is written in CoffeeScript on Node.js. This speeds up development and drastically reduces the amount of time it takes new developers to get up to speed.\u003C\u002Fp\u003E\n\u003Cp\u003ESetting up an npm registry with \u003Ca href=\"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Fsinopia\" rel=\"noopener\"\u003E\u003Ccode\u003Esinopia\u003C\u002Fcode\u003E\u003C\u002Fa\u003E allowed us to create private npm modules which can be used on both the client and server. This allowed us to break up our application into easily testable chunks for consumption by the client, chat-server, and the chat-notify server. Small tested modules which do one thing well and follow \u003Ca href=\"http:\u002F\u002Fsemver.org\" rel=\"noopener\"\u003Esemantic versioning\u003C\u002Fa\u003E. That gives us a lot of confidence and ensures consistency across client and server.\u003C\u002Fp\u003E\n","attributes":{"date":"2015-04-28T00:00:00.000Z","summary":"The idea was to build a chat application of our own. A whole new standalone product to raise the bar for team communication and collaboration. From the beginning, Teamwork Chat was intended to tie our whole suite of…","original":{"blogLink":"https:\u002F\u002Fengineroom.teamwork.com","blogName":"Teamwork's Engine Room","url":"https:\u002F\u002Fengineroom.teamwork.com\u002Fdealing-with-long-paths-fcf412649a01"},"tags":[{"id":"teamwork","name":"teamwork"},{"id":"chat","name":"chat"},{"id":"nodejs","name":"node.js"},{"id":"javascript","name":"javascript"},{"id":"node-webkit","name":"node-webkit"},{"id":"nwjs","name":"NW.js"}],"title":"A peek under the hood of Teamwork Chat","updated_at":"2018-01-11T19:45:11.000Z","photo":"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Fteamwork-chat.png"},"title":"A peek under the hood of Teamwork Chat","renderedSummary":"\u003Cp\u003EThe idea was to build a chat application of our own. A whole new standalone product to raise the bar for team communication and collaboration. From the beginning, Teamwork Chat was intended to tie our whole suite of…\u003C\u002Fp\u003E\n","rendered":"\u003Ch2\u003E\u003Ca id=\"a-peek-under-the-hood-of-teamwork-chat\" class=\"post-header-anchor\" href=\"#a-peek-under-the-hood-of-teamwork-chat\" aria-hidden=\"true\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"\u003E\u003Cpath d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fsvg\u003E\u003C\u002Fa\u003EA peek under the hood of Teamwork Chat\u003C\u002Fh2\u003E\n\u003Cp\u003EThe idea was to build a chat application of our own. A whole new standalone product to raise the bar for team communication and collaboration. From the beginning, \u003Ca href=\"https:\u002F\u002Fwww.teamwork.com\u002Fchat\" rel=\"noopener\"\u003ETeamwork Chat\u003C\u002Fa\u003E was intended to tie our whole suite of products together. Being able to have a quick conversation about a project, seeing support tickets automatically as they came in, and creating a task, all without leaving the app.\u003C\u002Fp\u003E\n\u003Cp\u003EThe first prototype was put together by a small team in Cork roughly a year ago. While attending O’Reilly’s \u003Ca href=\"http:\u002F\u002Ffluentconf.com\u002F\" rel=\"noopener\"\u003EFluent Conference\u003C\u002Fa\u003E in San Francisco, this was fleshed out a bit more. Thousands and thousands of hours, way more lines of code, and even a complete redesign later; \u003Ca href=\"https:\u002F\u002Fblog.teamwork.com\u002Fannouncing-teamwork-chat\u002F\" rel=\"noopener\"\u003ETeamwork Chat was released to the world\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Cfigure\u003E\n          \u003Ca href=\"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Fteamwork-chat.png\"\u003E\u003Cimg src=\"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Fteamwork-chat.png\" alt=\"\"\u002F\u003E\u003C\u002Fa\u003E\n          \u003Cfigcaption\u003E\u003Cp\u003EThe Teamwork Chat logo\u003C\u002Fp\u003E\n\u003C\u002Ffigcaption\u003E\n        \u003C\u002Ffigure\u003E\u003Cp\u003EFrom back to front, our stack begins with twenty MySQL shards. We have four Node.js \u003Ccode\u003Echat-server\u003C\u002Fcode\u003Es and an nginx load balancer per Amazon EC2 instance. The \u003Ccode\u003Echat-server\u003C\u002Fcode\u003Es communicate via Redis (pub\u002Fsub). In front of these EC2 instances we have an Elastic Load Balancer. We also have \u003Ccode\u003Echat-notify-server\u003C\u002Fcode\u003Es which listen for events over a Redis channel and handle the sending of email and push notifications. \u003Ca href=\"http:\u002F\u002Fadamlynch.com\u002Fcoffeescript-at-teamwork\u002F\" rel=\"noopener\"\u003EEverything is written in CoffeeScript\u003C\u002Fa\u003E and server updates are rolled out using a continuous deployment service once we push to \u003Ccode\u003Emaster\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch4\u003E\u003Ca id=\"crashy\" class=\"post-header-anchor\" href=\"#crashy\" aria-hidden=\"true\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"\u003E\u003Cpath d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fsvg\u003E\u003C\u002Fa\u003ECrashy\u003C\u002Fh4\u003E\n\u003Cp\u003EWe’ve been overly cautious. Load is quite thinly spread and everything is fault-tolerant. Our Node servers restart themselves on failure and connected clients migrate to other chat-servers. Errors and events like these are monitored using \u003Ca href=\"https:\u002F\u002Fgetsentry.com\u002F\" rel=\"noopener\"\u003ESentry\u003C\u002Fa\u003E. As some last-minute pre-release jitters were setting in, we added the following code to the chat-server to test the fault-tolerance again just to be safe:\u003C\u002Fp\u003E\n\u003Cp\u003EIf anyone sent a message containing exactly \u003Ccode\u003Ecrashy\u003C\u002Fcode\u003E, the chat-server they were connected to would die, anyone connected would be routed to a different chat-server and the server would restart. This bit of code was still there in production up to a week \u003Cem\u003Eafter\u003C\u002Fem\u003E we released. Yep. We're human after all.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-coffeescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E contents\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ebody \u003Cspan class=\"token keyword\"\u003Eis\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'crashy'\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ethrow\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EError\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'crashy crashy'\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cfigure\u003E\n          \u003Ca href=\"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Feek.gif\"\u003E\u003Cimg src=\"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Feek.gif\" alt=\"\"\u002F\u003E\u003C\u002Fa\u003E\n          \u003Cfigcaption\u003E\u003Cp\u003EEek!\u003C\u002Fp\u003E\n\u003C\u002Ffigcaption\u003E\n        \u003C\u002Ffigure\u003E\u003Ch4\u003E\u003Ca id=\"the-clients\" class=\"post-header-anchor\" href=\"#the-clients\" aria-hidden=\"true\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"\u003E\u003Cpath d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fsvg\u003E\u003C\u002Fa\u003EThe client(s)\u003C\u002Fh4\u003E\n\u003Cp\u003EWe use Node on the server and the client. If that sounds crazy, have a look at \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fnwjs\u002Fnw.js\" rel=\"noopener\"\u003ENW.js\u003C\u002Fa\u003E (formerly known as node-webkit). NW.js combines chromium and \u003Ca href=\"http:\u002F\u002Freadwrite.com\u002F2015\u002F02\u002F27\u002Fnode-js-io-js-reconciliation-near\" rel=\"noopener\"\u003Eio.js\u003C\u002Fa\u003E. This enables you to quickly create a desktop application using HTML, CSS and JavaScript (just like you would be able to in Chrome) with access to the all of the power of io.js. As Web developers, this is a major win for us.\u003C\u002Fp\u003E\n\u003Cp\u003EAs NW.js (0.12.0) is basically Chrome (41), we can just put our desktop app on the Web and it will basically just work. That’s a simplification but you get the picture. Even further, we should be able to create Android and iOS apps by sticking our app in a WebView. We’re attempting to build a consistent experience across all platforms from the one codebase. It’s not as easy as I make out though; expect more posts to follow up on this.\u003C\u002Fp\u003E\n\u003Cp\u003EFor the client, we use Knockout.js (as does every \u003Ca href=\"http:\u002F\u002FTeamwork.com\" rel=\"noopener\"\u003ETeamwork.com\u003C\u002Fa\u003E product) extensively, Browserify, jQuery, and many many more modules and libraries. Our clients and servers communicate back and forth via pure WebSockets. We’ve built a custom in-app auto-updater using \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fedjafarov\u002Fnode-webkit-updater\" rel=\"noopener\"\u003E\u003Ccode\u003Enode-webkit-updater\u003C\u002Fcode\u003E\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003ETeamwork Chat is a mobile-first responsive app. Our stylesheets are written in LESS and are littered with mixins, variables, and \u003Ccode\u003Eem\u003C\u002Fcode\u003E values. We tend to base a lot of our variables on common \u002F base variables using color functions, mathematic operations, etc... This makes it very easy to tweak the interface significantly by changing a variable or two. There aren't any prefixes to be found (thanks to \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fpostcss\u002Fautoprefixer\" rel=\"noopener\"\u003E\u003Ccode\u003Eautoprefixer\u003C\u002Fcode\u003E\u003C\u002Fa\u003E), flexbox is used for layout where it really saves us hassle, and we also use SVGs exclusively. Teamwork Chat wasn't always responsive though. As I mentioned earlier, we completely changed the direction of Teamwork Chat at one point. While doing this, we also re-wrote the markup and styles, but more about that in a future post.\u003C\u002Fp\u003E\n\u003Cp\u003EOur build system of choice is \u003Ca href=\"http:\u002F\u002Fwww.adamlynch.com\u002Frome-wasnt-built-with-gulp\u002F\" rel=\"noopener\"\u003Egulp\u003C\u002Fa\u003E. Teamwork Chat uses gulp heavily, including for building \u003Ccode\u003E.app\u003C\u002Fcode\u003Es and \u003Ccode\u003E.exe\u003C\u002Fcode\u003Es, creating installers, signing executables, as well as all of typical stuff like compilation.\u003C\u002Fp\u003E\n\u003Cp\u003EWe’ve contributed to a lot of open-source projects we’ve built Teamwork Chat on, including \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmllrsohn\u002Fnode-webkit-builder\" rel=\"noopener\"\u003E\u003Ccode\u003Enode-webkit-builder\u003C\u002Fcode\u003E\u003C\u002Fa\u003E and \u003Ccode\u003Enode-webkit-updater\u003C\u002Fcode\u003E, which I help maintain. We have open-sourced some of our own modules and plan to release even more. Watch this space.\u003C\u002Fp\u003E\n\u003Ch4\u003E\u003Ca id=\"one-language-one-platform\" class=\"post-header-anchor\" href=\"#one-language-one-platform\" aria-hidden=\"true\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"15\" height=\"15\" viewBox=\"0 0 8 8\"\u003E\u003Cpath d=\"M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fsvg\u003E\u003C\u002Fa\u003EOne language, one platform\u003C\u002Fh4\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Fjavascript.png\" alt=\"The Java logo photoshopped to be a JavaScript logo\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ESwitching between writing client and server-side code is a breeze; everything is written in CoffeeScript on Node.js. This speeds up development and drastically reduces the amount of time it takes new developers to get up to speed.\u003C\u002Fp\u003E\n\u003Cp\u003ESetting up an npm registry with \u003Ca href=\"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Fsinopia\" rel=\"noopener\"\u003E\u003Ccode\u003Esinopia\u003C\u002Fcode\u003E\u003C\u002Fa\u003E allowed us to create private npm modules which can be used on both the client and server. This allowed us to break up our application into easily testable chunks for consumption by the client, chat-server, and the chat-notify server. Small tested modules which do one thing well and follow \u003Ca href=\"http:\u002F\u002Fsemver.org\" rel=\"noopener\"\u003Esemantic versioning\u003C\u002Fa\u003E. That gives us a lot of confidence and ensures consistency across client and server.\u003C\u002Fp\u003E\n","summary":"The idea was to build a chat application of our own. A whole new standalone product to raise the bar for team communication and collaboration. From the beginning, Teamwork Chat was intended to tie our whole suite of…\n","original":{"blogLink":"https:\u002F\u002Fengineroom.teamwork.com","blogName":"Teamwork's Engine Room","url":"https:\u002F\u002Fengineroom.teamwork.com\u002Fdealing-with-long-paths-fcf412649a01"},"photo":"\u002Fimages\u002Fblog-content\u002Fa-peek-under-the-hood-of-teamwork-chat\u002Fteamwork-chat.png","keywords":["teamwork","chat","node.js","javascript","node-webkit","NW.js"],"published_at":"2015-04-28T00:00:00.000Z","updated_at":"2018-01-11T19:45:11.000Z","year":2015,"month":4,"day":29}}],"error":null,"state":{"nameToShow":"Adam Lynch","githubAccountUrl":"https:\u002F\u002Fgithub.com\u002Fadam-lynch","siteUrl":"https:\u002F\u002Fadamlynch.com","siteTitle":"Adam Lynch","repositoryUrl":"https:\u002F\u002Fgithub.com\u002Fadam-lynch\u002Fadam-lynch.github.io"},"serverRendered":true};</script><script src="/_nuxt/manifest.abc31dc060e3ed19359c.js" defer></script><script src="/_nuxt/layouts/default.dcd755738ab4512ac2d6.js" defer></script><script src="/_nuxt/2.3b673da155016dda00fa.js" defer></script><script src="/_nuxt/vendor.ce05078a33ab89125ee8.js" defer></script><script src="/_nuxt/app.7483cb8f66e5132744b6.js" defer></script>

    <script src="https://use.typekit.net/tci5xbk.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-31546953-1', 'auto');
        ga('send', 'pageview');
    </script>
  </body>
</html>
